<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/observability-workshop/v4.54/favicons/favicon.ico><link rel=apple-touch-icon href=/observability-workshop/v4.54/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-192x192.png sizes=192x192><title>Monitor System Logs with Splunk Universal Forwarder | Splunk Observability Cloud Workshops</title><meta name=description content="Objective: Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise
Duration: 10 Minutes
Scenario You&amp;rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.
1. Ensure You&amp;rsquo;re in the Correct Directory we will need to be in /home/ubuntu/session-2 cd /home/ubuntu/session-2 2."><meta property="og:title" content="Monitor System Logs with Splunk Universal Forwarder"><meta property="og:description" content="Objective: Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise
Duration: 10 Minutes
Scenario You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.
1. Ensure You&rsquo;re in the Correct Directory we will need to be in /home/ubuntu/session-2 cd /home/ubuntu/session-2 2."><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v4.54/tko/session-2/docs/forwarder/"><meta property="article:section" content="tko"><meta property="article:modified_time" content="2023-02-09T12:33:05-06:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta itemprop=name content="Monitor System Logs with Splunk Universal Forwarder"><meta itemprop=description content="Objective: Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise
Duration: 10 Minutes
Scenario You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.
1. Ensure You&rsquo;re in the Correct Directory we will need to be in /home/ubuntu/session-2 cd /home/ubuntu/session-2 2."><meta itemprop=dateModified content="2023-02-09T12:33:05-06:00"><meta itemprop=wordCount content="751"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Monitor System Logs with Splunk Universal Forwarder"><meta name=twitter:description content="Objective: Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise
Duration: 10 Minutes
Scenario You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.
1. Ensure You&rsquo;re in the Correct Directory we will need to be in /home/ubuntu/session-2 cd /home/ubuntu/session-2 2."><link rel=preload href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css as=style><link href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1><a class=navbar-brand href=/observability-workshop/v4.54/><span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div></nav><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/imt/><i class='fa-regular fa-sitemap'></i><span>Splunk IM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/apm/><i class='fa-solid fa-code-fork'></i><span>Splunk APM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/synthetics/><i class='fa-brands fa-chrome'></i><span>Splunk Synthetics</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/rum/><i class='fa-regular fa-chalkboard-user'></i><span>Splunk RUM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/oncall/><i class="fa-regular fa-phone-flip"></i><span>Splunk OnCall</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>More Workshops</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/pet-clinic/>Pet Clinic Java Workshop</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/bootcamp/>O11y Bootcamp</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/resources/>Resources</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Releases</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.53>v4.53</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.54>v4.54</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/observability-workshop/v4.54/offline-search-index.dd951ac1c98794d85a942e6a9fe80b1f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tko-li><a href=/observability-workshop/v4.54/tko/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-observability-workshopv454tko><span>TKO Workshops</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-1-li><a href=/observability-workshop/v4.54/tko/session-1/ title="1. Role Play Qualification / Discovery - with SRE and ITOPs" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-1><span>Session 1</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tkosession-2-li><a href=/observability-workshop/v4.54/tko/session-2/ title="2. Getting Data In (GDI) & OTEL" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-2><span>Session 2</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsintro-li><a href=/observability-workshop/v4.54/tko/session-2/docs/intro/ title="Intro to O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsintro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsgetting_started-li><a href=/observability-workshop/v4.54/tko/session-2/docs/getting_started/ title="Getting Started with O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsgetting_started><span>Getting started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsdeploy-li><a href=/observability-workshop/v4.54/tko/session-2/docs/deploy/ title="Deploy complex environments and capture meterics" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsdeploy><span>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docscode_to_python-li><a href=/observability-workshop/v4.54/tko/session-2/docs/code_to_python/ title="Code to Kubernetes - Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docscode_to_python><span>Code to Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsinstrument-li><a href=/observability-workshop/v4.54/tko/session-2/docs/instrument/ title="Instrument REVIEWS for Tracing" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsinstrument><span>Instrumentation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-observability-workshopv454tkosession-2docsforwarder-li><a href=/observability-workshop/v4.54/tko/session-2/docs/forwarder/ title="Monitor System Logs with Splunk Universal Forwarder" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsforwarder><span class=td-sidebar-nav-active-item>UF Deployment</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-3-li><a href=/observability-workshop/v4.54/tko/session-3/ title="3. ITOps Monitoring Monitoring Monitoring" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-3><span>Session 3</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-4-li><a href=/observability-workshop/v4.54/tko/session-4/ title="4. ITOps - Understanding Event Analytics in Realistic Business Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-4><span>Session 4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-5-li><a href=/observability-workshop/v4.54/tko/session-5/ title="5. How Platform Engineers Observe Kubernetes - Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-5><span>Session 5</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-otel-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-otel/ title="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-otel><span>Deploying the OTel Collector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docscheck-new-navigator-li><a href=/observability-workshop/v4.54/tko/session-5/docs/check-new-navigator/ title="The New Kubernetes Navigator" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docscheck-new-navigator><span>Touring the Kubernetes Navigator v2</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-apache><span>Deploying PHP/Apache</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsfix-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/fix-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsfix-apache><span>Fix PHP/Apache Issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-loadgen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen><span>Deploy Load Generator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docssetup-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/setup-hpa/ title="Setup Horizontal Pod Autoscaling (HPA)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docssetup-hpa><span>Setup HPA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsedit-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/edit-hpa/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsedit-hpa><span>Increase HPA Replicas</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-6-li><a href=/observability-workshop/v4.54/tko/session-6/ title="6. O11y - Distributed Tracing for modern applications" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-6><span>Session 6</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docssetup-li><a href=/observability-workshop/v4.54/tko/session-6/docs/setup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docssetup><span>Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsvalidate_traces-li><a href=/observability-workshop/v4.54/tko/session-6/docs/validate_traces/ title="Validate Traces are being collected" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsvalidate_traces><span>Validate Traces</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsdeveloper_role-li><a href=/observability-workshop/v4.54/tko/session-6/docs/developer_role/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsdeveloper_role><span>Developer Role</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docscustom_attribution-li><a href=/observability-workshop/v4.54/tko/session-6/docs/custom_attribution/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docscustom_attribution><span>Custom Attribution</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfix_issue-li><a href=/observability-workshop/v4.54/tko/session-6/docs/fix_issue/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfix_issue><span>Fix the issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsroot_cause-li><a href=/observability-workshop/v4.54/tko/session-6/docs/root_cause/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsroot_cause><span>Root Cause Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsbuild_again-li><a href=/observability-workshop/v4.54/tko/session-6/docs/build_again/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsbuild_again><span>Build and Deploy again</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfinal_fix-li><a href=/observability-workshop/v4.54/tko/session-6/docs/final_fix/ title="The Final Fix!" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfinal_fix><span>Developer Role (Part 2)</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#scenario>Scenario</a><ul><li><a href=#1-ensure-youre-in-the-correct-directory>1. Ensure You&rsquo;re in the Correct Directory</a></li><li><a href=#2-review-the-universal-forwarder-install-script>2. Review the Universal Forwarder Install Script</a></li><li><a href=#3-run-the-install-script>3. Run the install script</a></li><li><a href=#4-verify-installation-of-the-universal-forwarader>4. Verify installation of the Universal Forwarader</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/>TKO Workshops</a></li><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-2/>Session 2</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-2/docs/forwarder/ aria-disabled=true class="btn-link disabled">UF Deployment</a></li></ol></nav><div class=td-content><h1>Monitor System Logs with Splunk Universal Forwarder</h1><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 4 minute read &nbsp;</p></header><p><strong>Objective:</strong> Learn how to monitor Linux system logs with the Universal Forwarder sending logs to Splunk Enterprise</p><p><strong>Duration</strong>: 10 Minutes</p><h2 id=scenario>Scenario</h2><p>You&rsquo;ve been tasked with monitoring the OS logs of the host running your Kubernetes cluster. We are going to utilize a script that will autodeploy the Splunk Universal Forwarder. You will then configure the Universal Forwarder to send logs to the Splunk Enterprise instance assigned to you.</p><h3 id=1-ensure-youre-in-the-correct-directory>1. Ensure You&rsquo;re in the Correct Directory</h3><ul><li>we will need to be in /home/ubuntu/session-2</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#366>cd</span> /home/ubuntu/session-2
</span></span></code></pre></div><h3 id=2-review-the-universal-forwarder-install-script>2. Review the Universal Forwarder Install Script</h3><ul><li>Let&rsquo;s take a look at the script that will install the Universal Forwarder and Linux TA automatically for you.<ul><li>This script is primarily used for remote instances.</li><li>Note we are not using a deployment server in this lab, however it is recommended in production we do that.</li><li>What user are we installing Splunk as?</li></ul></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#099>#!/bin/sh  
</span></span></span><span style=display:flex><span><span style=color:#099></span><span style=color:#09f;font-style:italic># This EXAMPLE script shows how to deploy the Splunk universal forwarder</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># to many remote hosts via ssh and common Unix commands.</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># For &#34;real&#34; use, this script needs ERROR DETECTION AND LOGGING!!</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># --Variables that you must set -----</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Set username using by splunkd to run.</span>
</span></span><span style=display:flex><span>  <span style=color:#033>SPLUNK_RUN_USER</span><span style=color:#555>=</span><span style=color:#c30>&#34;splunk&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Populate this file with a list of hosts that this script should install to,</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># with one host per line. This must be specified in the form that should</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># be used for the ssh login, ie. username@host</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Example file contents:</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># splunkuser@10.20.13.4</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># splunkker@10.20.13.5</span>
</span></span><span style=display:flex><span>  <span style=color:#033>HOSTS_FILE</span><span style=color:#555>=</span><span style=color:#c30>&#34;myhost.txt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># This should be a WGET command that was *carefully* copied from splunk.com!!</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Sign into splunk.com and go to the download page, then look for the wget</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># link near the top of the page (once you have selected your platform)</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># copy and paste your wget command between the &#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#033>WGET_CMD</span><span style=color:#555>=</span><span style=color:#c30>&#34;wget -O splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz &#39;https://download.splunk.com/products/universalforwarder/releases/9.0.3/linux/splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Set the install file name to the name of the file that wget downloads</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># (the second argument to wget)</span>
</span></span><span style=display:flex><span>  <span style=color:#033>INSTALL_FILE</span><span style=color:#555>=</span><span style=color:#c30>&#34;splunkforwarder-9.0.3-dd0128b1f8cd-Linux-x86_64.tgz&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># After installation, the forwarder will become a deployment client of this</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># host.  Specify the host and management (not web) port of the deployment server</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># that will be managing these forwarder instances.</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Example 1.2.3.4:8089</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>#  DEPLOY_SERVER=&#34;x.x.x.x:8089&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># After installation, the forwarder can have additional TA&#39;s added to the </span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># /app directory please provide the local where TA&#39;s will be. </span>
</span></span><span style=display:flex><span>  <span style=color:#033>TA_INSTALL_DIRECTORY</span><span style=color:#555>=</span><span style=color:#c30>&#34;/tmp&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Set the seed app folder name for deploymentclien.conf</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>#  DEPLOY_APP_FOLDER_NAME=&#34;seed_all_deploymentclient&#34;</span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic># Set the new Splunk admin password</span>
</span></span><span style=display:flex><span>  <span style=color:#033>PASSWORD</span><span style=color:#555>=</span><span style=color:#c30>&#34;changeme&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#033>REMOTE_SCRIPT_DEPLOY</span><span style=color:#555>=</span><span style=color:#c30>&#34;
</span></span></span><span style=display:flex><span><span style=color:#c30>  cd /opt
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo </span><span style=color:#033>$WGET_CMD</span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo tar xvzf </span><span style=color:#033>$INSTALL_FILE</span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo rm </span><span style=color:#033>$INSTALL_FILE</span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo useradd </span><span style=color:#033>$SPLUNK_RUN_USER</span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo find </span><span style=color:#033>$TA_INSTALL_DIRECTORY</span><span style=color:#c30> -name &#39;*.tgz&#39; -exec tar xzvf {} --directory /opt/splunkforwarder/etc/apps \;
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo chown -R </span><span style=color:#033>$SPLUNK_RUN_USER</span><span style=color:#c30>:</span><span style=color:#033>$SPLUNK_RUN_USER</span><span style=color:#c30> /opt/splunkforwarder
</span></span></span><span style=display:flex><span><span style=color:#c30>  echo \&#34;[user_info] 
</span></span></span><span style=display:flex><span><span style=color:#c30>  USERNAME = admin
</span></span></span><span style=display:flex><span><span style=color:#c30>  PASSWORD = </span><span style=color:#033>$PASSWORD</span><span style=color:#c30>\&#34; &gt; /opt/splunkforwarder/etc/system/local/user-seed.conf   
</span></span></span><span style=display:flex><span><span style=color:#c30>  #sudo cp </span><span style=color:#033>$TA_INSTALL_DIRECTORY</span><span style=color:#c30>/*.tgz /opt/splunkforwader/etc/apps/
</span></span></span><span style=display:flex><span><span style=color:#c30>  #sudo find /opt/splunkforwarder/etc/apps/ -name &#39;*.tgz&#39; -exec tar xzvf {} \;
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo -u splunk /opt/splunkforwarder/bin/splunk start --accept-license --answer-yes --auto-ports --no-prompt
</span></span></span><span style=display:flex><span><span style=color:#c30>  sudo /opt/splunkforwarder/bin/splunk enable boot-start -user </span><span style=color:#033>$SPLUNK_RUN_USER</span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  #sudo cp </span><span style=color:#033>$TA_INSTALL_DIRECTORY</span><span style=color:#c30>/*.tgz /opt/splunkforwarder/etc/apps/
</span></span></span><span style=display:flex><span><span style=color:#c30>
</span></span></span><span style=display:flex><span><span style=color:#c30>  exit
</span></span></span><span style=display:flex><span><span style=color:#c30> &#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#033>DIR</span><span style=color:#555>=</span><span style=color:#c30>&#34;</span><span style=color:#069;font-weight:700>$(</span> <span style=color:#366>cd</span> <span style=color:#c30>&#34;</span><span style=color:#069;font-weight:700>$(</span> dirname <span style=color:#c30>&#34;</span><span style=color:#a00>${</span><span style=color:#033>BASH_SOURCE</span>[0]<span style=color:#a00>}</span><span style=color:#c30>&#34;</span> <span style=color:#069;font-weight:700>)</span><span style=color:#c30>&#34;</span> &gt;/dev/null <span style=color:#555>&amp;&amp;</span> <span style=color:#366>pwd</span> <span style=color:#069;font-weight:700>)</span><span style=color:#c30>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>#===============================================================================================</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;In 5 seconds, will run the following script on each remote host:&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;====================&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;</span><span style=color:#033>$REMOTE_SCRIPT_DEPLOY</span><span style=color:#c30>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;====================&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> 
</span></span><span style=display:flex><span>  sleep <span style=color:#f60>5</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;Reading host logins from </span><span style=color:#033>$HOSTS_FILE</span><span style=color:#c30>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;Starting.&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#069;font-weight:700>for</span> DST in <span style=color:#c30>`</span>cat <span style=color:#c30>&#34;</span><span style=color:#033>$DIR</span><span style=color:#c30>/</span><span style=color:#033>$HOSTS_FILE</span><span style=color:#c30>&#34;</span><span style=color:#c30>`</span>; <span style=color:#069;font-weight:700>do</span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>if</span> <span style=color:#555>[</span> -z <span style=color:#c30>&#34;</span><span style=color:#033>$DST</span><span style=color:#c30>&#34;</span> <span style=color:#555>]</span>; <span style=color:#069;font-weight:700>then</span>
</span></span><span style=display:flex><span>      <span style=color:#069;font-weight:700>continue</span>;
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>fi</span>
</span></span><span style=display:flex><span>    <span style=color:#366>echo</span> <span style=color:#c30>&#34;---------------------------&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#366>echo</span> <span style=color:#c30>&#34;Installing to </span><span style=color:#033>$DST</span><span style=color:#c30>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#366>echo</span> <span style=color:#c30>&#34;Initial UF deployment&#34;</span>
</span></span><span style=display:flex><span>    sudo ssh -t <span style=color:#c30>&#34;</span><span style=color:#033>$DST</span><span style=color:#c30>&#34;</span> <span style=color:#c30>&#34;</span><span style=color:#033>$REMOTE_SCRIPT_DEPLOY</span><span style=color:#c30>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#069;font-weight:700>done</span>  
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;---------------------------&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;Done&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#366>echo</span> <span style=color:#c30>&#34;Please use the following app folder name to override deploymentclient.conf options: </span><span style=color:#033>$DEPLOY_APP_FOLDER_NAME</span><span style=color:#c30>&#34;</span>
</span></span></code></pre></div><h3 id=3-run-the-install-script>3. Run the install script</h3><p>We will run the install script now. You will see some Warnings at the end. This is totally normal.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./install.sh
</span></span></code></pre></div><h3 id=4-verify-installation-of-the-universal-forwarader>4. Verify installation of the Universal Forwarader</h3><ul><li>We need to verify that the Splunk Universal Forwarder is installed and running.<ul><li>You should see a couple PID&rsquo;s return and a &ldquo;Splunk is currently running.&rdquo; message.</li></ul></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunkforwarder/bin/splunk status
</span></span></code></pre></div><h4 id=5-configure-the-universal-forwarder-to-send-data-to-splunk-enterprise>5. Configure the Universal Forwarder to Send Data to Splunk Enterprise.</h4><ul><li>We will be able to send the data to our Splunk Enterprise environment easily by entering one line into the cli.<ul><li><a href=https://docs.splunk.com/Documentation/Forwarder/9.0.3/Forwarder/Configuretheuniversalforwarder target=_blank>Universal Forwarder Config Guide</a></li></ul></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunkforwarder/bin/splunk add forward-server &lt;your_splunk_enterprise_ip&gt;:9997
</span></span></code></pre></div><h4 id=6-verify-the-data-in-your-splunk-enterprise-environment>6. Verify the Data in Your Splunk Enterprise Environment</h4><ul><li><p>We are now going to take a look at the Splunk Enterprise environment to verify logs are coming in.</p><ul><li>Logs will be coming into <code>index=main</code></li></ul></li><li><p>Open your web browser and navigate to: <code>http://&lt;your_splunk_enterprise_ip:8000</code></p><ul><li>You will use the credentials <code>admin:&lt;your_ssh_password></code></li></ul></li><li><p>In the search bar, type in the following:</p></li><li><p><code>index=main host=&lt;your_host_name></code></p></li><li><p>You should see data from your host. Take note of the interesting fields and the different data sources flowing in.</p></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/splunk/observability-workshop aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Splunk Inc. All Rights Reserved</small></div></div></div></footer></div><script src=/observability-workshop/v4.54/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.54/js/tabpane-persist.js></script>
<script>const svgCopy='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',svgCheck='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>',addCopyButtons=e=>{document.querySelectorAll("pre > code").forEach(t=>{const n=document.createElement("button");n.className="clipboard-button",n.type="button",n.innerHTML=svgCopy,n.addEventListener("click",()=>{textToCopy=t.innerText.replace(/^\s*\n/gm,""),console.log(textToCopy),e.writeText(textToCopy).then(()=>{n.blur(),n.innerHTML=svgCheck,setTimeout(()=>n.innerHTML=svgCopy,2e3)},e=>n.innerHTML="Error")});const s=t.parentNode;s.parentNode.insertBefore(n,s)})};if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",e.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",e.crossOrigin="anonymous",e.onload=()=>addCopyButtons(clipboard),document.body.appendChild(e)}</script></body></html>