<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/observability-workshop/v4.54/favicons/favicon.ico><link rel=apple-touch-icon href=/observability-workshop/v4.54/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-192x192.png sizes=192x192><title>Deploy complex environments and capture meterics | Splunk Observability Cloud Workshops</title><meta name=description content="Objective: Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations
Duration: 15 Minutes
Scenario A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?"><meta property="og:title" content="Deploy complex environments and capture meterics"><meta property="og:description" content="Objective: Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations
Duration: 15 Minutes
Scenario A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?"><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v4.54/tko/session-2/docs/deploy/"><meta property="article:section" content="tko"><meta property="article:modified_time" content="2023-02-03T10:40:38-06:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta itemprop=name content="Deploy complex environments and capture meterics"><meta itemprop=description content="Objective: Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations
Duration: 15 Minutes
Scenario A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?"><meta itemprop=dateModified content="2023-02-03T10:40:38-06:00"><meta itemprop=wordCount content="650"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy complex environments and capture meterics"><meta name=twitter:description content="Objective: Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations
Duration: 15 Minutes
Scenario A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?"><link rel=preload href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css as=style><link href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1><a class=navbar-brand href=/observability-workshop/v4.54/><span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div></nav><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/imt/><i class='fa-regular fa-sitemap'></i><span>Splunk IM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/apm/><i class='fa-solid fa-code-fork'></i><span>Splunk APM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/synthetics/><i class='fa-brands fa-chrome'></i><span>Splunk Synthetics</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/rum/><i class='fa-regular fa-chalkboard-user'></i><span>Splunk RUM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/oncall/><i class="fa-regular fa-phone-flip"></i><span>Splunk OnCall</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>More Workshops</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/pet-clinic/>Pet Clinic Java Workshop</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/bootcamp/>O11y Bootcamp</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/resources/>Resources</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Releases</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.53>v4.53</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.54>v4.54</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/observability-workshop/v4.54/offline-search-index.dd951ac1c98794d85a942e6a9fe80b1f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tko-li><a href=/observability-workshop/v4.54/tko/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-observability-workshopv454tko><span>TKO Workshops</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-1-li><a href=/observability-workshop/v4.54/tko/session-1/ title="1. Role Play Qualification / Discovery - with SRE and ITOPs" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-1><span>Session 1</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tkosession-2-li><a href=/observability-workshop/v4.54/tko/session-2/ title="2. Getting Data In (GDI) & OTEL" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-2><span>Session 2</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsintro-li><a href=/observability-workshop/v4.54/tko/session-2/docs/intro/ title="Intro to O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsintro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsgetting_started-li><a href=/observability-workshop/v4.54/tko/session-2/docs/getting_started/ title="Getting Started with O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsgetting_started><span>Getting started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-observability-workshopv454tkosession-2docsdeploy-li><a href=/observability-workshop/v4.54/tko/session-2/docs/deploy/ title="Deploy complex environments and capture meterics" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsdeploy><span class=td-sidebar-nav-active-item>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docscode_to_python-li><a href=/observability-workshop/v4.54/tko/session-2/docs/code_to_python/ title="Code to Kubernetes - Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docscode_to_python><span>Code to Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsinstrument-li><a href=/observability-workshop/v4.54/tko/session-2/docs/instrument/ title="Instrument REVIEWS for Tracing" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsinstrument><span>Instrumentation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsforwarder-li><a href=/observability-workshop/v4.54/tko/session-2/docs/forwarder/ title="Monitor System Logs with Splunk Universal Forwarder" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsforwarder><span>UF Deployment</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-3-li><a href=/observability-workshop/v4.54/tko/session-3/ title="3. ITOps Monitoring Monitoring Monitoring" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-3><span>Session 3</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-4-li><a href=/observability-workshop/v4.54/tko/session-4/ title="4. ITOps - Understanding Event Analytics in Realistic Business Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-4><span>Session 4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-5-li><a href=/observability-workshop/v4.54/tko/session-5/ title="5. How Platform Engineers Observe Kubernetes - Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-5><span>Session 5</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-otel-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-otel/ title="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-otel><span>Deploying the OTel Collector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docscheck-new-navigator-li><a href=/observability-workshop/v4.54/tko/session-5/docs/check-new-navigator/ title="The New Kubernetes Navigator" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docscheck-new-navigator><span>Touring the Kubernetes Navigator v2</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-apache><span>Deploying PHP/Apache</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsfix-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/fix-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsfix-apache><span>Fix PHP/Apache Issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-loadgen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen><span>Deploy Load Generator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docssetup-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/setup-hpa/ title="Setup Horizontal Pod Autoscaling (HPA)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docssetup-hpa><span>Setup HPA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsedit-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/edit-hpa/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsedit-hpa><span>Increase HPA Replicas</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-6-li><a href=/observability-workshop/v4.54/tko/session-6/ title="6. O11y - Distributed Tracing for modern applications" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-6><span>Session 6</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docssetup-li><a href=/observability-workshop/v4.54/tko/session-6/docs/setup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docssetup><span>Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsvalidate_traces-li><a href=/observability-workshop/v4.54/tko/session-6/docs/validate_traces/ title="Validate Traces are being collected" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsvalidate_traces><span>Validate Traces</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsdeveloper_role-li><a href=/observability-workshop/v4.54/tko/session-6/docs/developer_role/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsdeveloper_role><span>Developer Role</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docscustom_attribution-li><a href=/observability-workshop/v4.54/tko/session-6/docs/custom_attribution/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docscustom_attribution><span>Custom Attribution</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfix_issue-li><a href=/observability-workshop/v4.54/tko/session-6/docs/fix_issue/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfix_issue><span>Fix the issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsroot_cause-li><a href=/observability-workshop/v4.54/tko/session-6/docs/root_cause/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsroot_cause><span>Root Cause Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsbuild_again-li><a href=/observability-workshop/v4.54/tko/session-6/docs/build_again/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsbuild_again><span>Build and Deploy again</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfinal_fix-li><a href=/observability-workshop/v4.54/tko/session-6/docs/final_fix/ title="The Final Fix!" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfinal_fix><span>Developer Role (Part 2)</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#scenario>Scenario</a><ul><li><a href=#1-where-can-i-find-helm-charts>1. Where can I find helm charts?</a></li><li><a href=#2-review-apache-kafka-packaged-by-bitnamihttpsgithubcombitnamichartstreemainbitnamikafkainstalling-the-chart>2. Review <a href=https://github.com/bitnami/charts/tree/main/bitnami/kafka/#installing-the-chart>Apache Kafka packaged by Bitnami</a></a></li><li><a href=#3-review-mongodbr-packaged-by-bitnamihttpsgithubcombitnamichartstreemasterbitnamimongodbinstalling-the-chart>3. Review <a href=https://github.com/bitnami/charts/tree/master/bitnami/mongodb/#installing-the-chart>MongoDB(R) packaged by Bitnami</a></a></li><li><a href=#4-install-kafka-and-mongodb-with-helm-charts>4. Install Kafka and MongoDB with helm charts</a></li><li><a href=#5-install-the-splunk-otel-helm-chart>5. Install the Splunk OTEL helm chart</a></li><li><a href=#6-verify-installation>6. Verify installation</a></li><li><a href=#7-verify-dashboards>7. Verify dashboards</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/>TKO Workshops</a></li><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-2/>Session 2</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-2/docs/deploy/ aria-disabled=true class="btn-link disabled">Deployment</a></li></ol></nav><div class=td-content><h1>Deploy complex environments and capture meterics</h1><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 4 minute read &nbsp;</p></header><p><strong>Objective:</strong> Learn how to efficiently deploy complex infrastructure components such as Kafka and MongoDB to demonstrate metrics collection with Splunk O11y IM integrations</p><p><strong>Duration</strong>: 15 Minutes</p><h2 id=scenario>Scenario</h2><p>A prospect uses Kafka and MongoDB in their environment. Since there are integrations for these services, you’d like to demonstrate this to the prospect. What is a quick and efficient way to set up a live environment with these services and have metrics collected?</p><h3 id=1-where-can-i-find-helm-charts>1. Where can I find helm charts?</h3><ul><li>Google “myservice helm chart”</li><li><code>https://artifacthub.io/</code> (<strong>Note:</strong> Look for charts from trusted organizations, with high star count and frequent updates)</li></ul><h3 id=2-review-apache-kafka-packaged-by-bitnamihttpsgithubcombitnamichartstreemainbitnamikafkainstalling-the-chart>2. Review <a href=https://github.com/bitnami/charts/tree/main/bitnami/kafka/#installing-the-chart target=_blank>Apache Kafka packaged by Bitnami</a></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>replicaCount=3</code></li><li><code>metrics.jmx.enabled=true</code></li><li><code>metrics.kafka.enabled=true</code></li><li><code>deleteTopicEnable=true</code></li></ul><h3 id=3-review-mongodbr-packaged-by-bitnamihttpsgithubcombitnamichartstreemasterbitnamimongodbinstalling-the-chart>3. Review <a href=https://github.com/bitnami/charts/tree/master/bitnami/mongodb/#installing-the-chart target=_blank>MongoDB(R) packaged by Bitnami</a></h3><p>We will deploy the helm chart with these options enabled:</p><ul><li><code>version 12.1.31</code></li><li><code>metrics.enabled=true</code></li><li><code>global.namespaceOverride=default</code></li><li><code>auth.rootUser=root</code></li><li><code>auth.rootPassword=splunk</code></li><li><code>auth.enabled=false</code></li></ul><h3 id=4-install-kafka-and-mongodb-with-helm-charts>4. Install Kafka and MongoDB with helm charts</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add bitnami https://charts.bitnami.com/bitnami
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm install kafka --set <span style=color:#033>replicaCount</span><span style=color:#555>=</span><span style=color:#f60>3</span> --set metrics.jmx.enabled<span style=color:#555>=</span><span style=color:#366>true</span> --set metrics.kafka.enabled<span style=color:#555>=</span><span style=color:#366>true</span>  --set <span style=color:#033>deleteTopicEnable</span><span style=color:#555>=</span><span style=color:#366>true</span> bitnami/kafka
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm install mongodb --set metrics.enabled<span style=color:#555>=</span><span style=color:#366>true</span> bitnami/mongodb --set global.namespaceOverride<span style=color:#555>=</span>default --set auth.rootUser<span style=color:#555>=</span>root --set auth.rootPassword<span style=color:#555>=</span>splunk --set auth.enabled<span style=color:#555>=</span><span style=color:#366>false</span> --version 12.1.31
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>###verify the helm chart installation</span>
</span></span><span style=display:flex><span>helm list
</span></span><span style=display:flex><span>NAME    NAMESPACE   REVISION    UPDATED                                 STATUS      CHART           APP VERSION
</span></span><span style=display:flex><span>kafka   default     <span style=color:#f60>1</span>           2022-11-14 11:21:36.328956822 -0800 PST deployed    kafka-19.1.3    3.3.1
</span></span><span style=display:flex><span>mongodb default     <span style=color:#f60>1</span>           2022-11-14 11:19:36.507690487 -0800 PST deployed    mongodb-12.1.31 5.0.10
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>###verify the helm chart installation</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get pods
</span></span><span style=display:flex><span>NAME                              READY   STATUS              RESTARTS   AGE
</span></span><span style=display:flex><span>kafka-exporter-595778d7b4-99ztt   0/1     ContainerCreating   <span style=color:#f60>0</span>          17s
</span></span><span style=display:flex><span>mongodb-b7c968dbd-jxvsj           0/2     Pending             <span style=color:#f60>0</span>          6s
</span></span><span style=display:flex><span>kafka-1                           0/2     ContainerCreating   <span style=color:#f60>0</span>          16s
</span></span><span style=display:flex><span>kafka-2                           0/2     ContainerCreating   <span style=color:#f60>0</span>          16s
</span></span><span style=display:flex><span>kafka-zookeeper-0                 0/1     Pending             <span style=color:#f60>0</span>          17s
</span></span><span style=display:flex><span>kafka-0                           0/2     Pending             <span style=color:#f60>0</span>          17s
</span></span></code></pre></div><p>Use information for each Helm chart and Splunk O11y Data Setup to generate values.yaml for capturing metrics from Kafka and MongoDB.</p><div class="alert alert-info" role=alert><p class=alert-heading>Note</p><div class=alert-body><p class=p-alert-body><code>values.yaml</code> for the different services will be passed to the Splunk Helm Chart at installation time. These will configure the OTEL collector to capture metrics from these services.</p></div></div><ul><li>References:<ul><li><a href=https://github.com/bitnami/charts/tree/master/bitnami/spark/#installing-the-chart target=_blank>Apache Kafka packaged by Bitnami</a></li><li><a href=https://docs.splunk.com/Observability/gdi/kafka/kafka.html target=_blank>Configure application receivers for databases » Apache Kafka</a></li><li><a href=https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/kafkametricsreceiver target=_blank>Kafkametricsreceiver</a></li></ul></li></ul><h4 id=41-example-kafkavaluesyaml>4.1 Example kafka.values.yaml</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#309;font-weight:700>otelAgent</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>receiver_creator</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>smartagent/kafka</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>rule</span>:<span style=color:#bbb> </span>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka&#34;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                    </span><span style=color:#09f;font-style:italic>#endpoint: &#39;`endpoint`:5555&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#f60>5555</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>type</span>:<span style=color:#bbb> </span>collectd/kafka<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>clusterName</span>:<span style=color:#bbb> </span>sl-kafka<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#309;font-weight:700>otelK8sClusterReceiver</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#309;font-weight:700>k8sEventsEnabled</span>:<span style=color:#bbb> </span><span style=color:#069;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>kafkametrics</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>brokers</span>:<span style=color:#bbb> </span>kafka:9092<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>protocol_version</span>:<span style=color:#bbb> </span><span style=color:#f60>2.0.0</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>scrapers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- brokers<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- topics<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- consumers<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>service</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>pipelines</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>metrics</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#09f;font-style:italic>#- prometheus</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- k8s_cluster<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span>- kafkametrics<span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=42-example-mongodbvaluesyaml>4.2 Example mongodb.values.yaml</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#309;font-weight:700>otelAgent</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receiver_creator</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>smartagent/mongodb</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>rule</span>:<span style=color:#bbb> </span>type == &#34;pod&#34; &amp;&amp; name matches &#34;mongo&#34;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>type</span>:<span style=color:#bbb> </span>collectd/mongodb<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>host</span>:<span style=color:#bbb> </span>mongodb.default.svc.cluster.local<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#f60>27017</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>databases</span>:<span style=color:#bbb> </span>[<span style=color:#c30>&#34;admin&#34;</span>,<span style=color:#bbb> </span><span style=color:#c30>&#34;O11y&#34;</span>,<span style=color:#bbb> </span><span style=color:#c30>&#34;local&#34;</span>,<span style=color:#bbb> </span><span style=color:#c30>&#34;config&#34;</span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>sendCollectionMetrics</span>:<span style=color:#bbb> </span><span style=color:#069;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>sendCollectionTopMetrics</span>:<span style=color:#bbb> </span><span style=color:#069;font-weight:700>true</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=43-example-zookeepervaluesyaml>4.3 Example zookeeper.values.yaml</h4><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#309;font-weight:700>otelAgent</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>        </span><span style=color:#309;font-weight:700>receiver_creator</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>receivers</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>            </span><span style=color:#309;font-weight:700>smartagent/zookeeper</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>rule</span>:<span style=color:#bbb> </span>type == &#34;pod&#34; &amp;&amp; name matches &#34;kafka-zookeeper&#34;<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>config</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>type</span>:<span style=color:#bbb> </span>collectd/zookeeper<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>host</span>:<span style=color:#bbb> </span>kafka-zookeeper<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>                </span><span style=color:#309;font-weight:700>port</span>:<span style=color:#bbb> </span><span style=color:#f60>2181</span><span style=color:#bbb>
</span></span></span></code></pre></div><h3 id=5-install-the-splunk-otel-helm-chart>5. Install the Splunk OTEL helm chart</h3><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#366>export</span> <span style=color:#033>SPLUNK_ACCESS_TOKEN</span><span style=color:#555>=</span>&lt;your access token&gt;
</span></span><span style=display:flex><span><span style=color:#366>export</span> <span style=color:#033>SPLUNK_REALM</span><span style=color:#555>=</span>&lt;your realm&gt;
</span></span><span style=display:flex><span><span style=color:#366>export</span> <span style=color:#033>clusterName</span><span style=color:#555>=</span>&lt;your cluster name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#366>cd</span> ../otel_yamls
</span></span><span style=display:flex><span>helm repo add splunk-otel-collector-chart https://splunk.github.io/splunk-otel-collector-chart
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm install --set <span style=color:#033>provider</span><span style=color:#555>=</span><span style=color:#c30>&#39; &#39;</span> --set <span style=color:#033>distro</span><span style=color:#555>=</span><span style=color:#c30>&#39; &#39;</span> --set splunkObservability.accessToken<span style=color:#555>=</span><span style=color:#033>$SPLUNK_ACCESS_TOKEN</span> --set <span style=color:#033>clusterName</span><span style=color:#555>=</span><span style=color:#033>$clusterName</span> --set splunkObservability.realm<span style=color:#555>=</span><span style=color:#033>$SPLUNK_REALM</span> --set otelCollector.enabled<span style=color:#555>=</span><span style=color:#c30>&#39;false&#39;</span> --set splunkObservability.logsEnabled<span style=color:#555>=</span><span style=color:#c30>&#39;true&#39;</span> --set gateway.enabled<span style=color:#555>=</span><span style=color:#c30>&#39;false&#39;</span> --values kafka.values.yaml --values mongodb.values.yaml --values zookeeper.values.yaml --values alwayson.values.yaml --values k3slogs.yaml --generate-name splunk-otel-collector-chart/splunk-otel-collector
</span></span></code></pre></div><h3 id=6-verify-installation>6. Verify installation</h3><p>Verify that the Kafka, MongoDB and Splunk OTEL Collector helm charts are installed, note that names may differ.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$helm list
</span></span><span style=display:flex><span>NAME                                NAMESPACE   REVISION    UPDATED                                 STATUS      CHART                           APP VERSION
</span></span><span style=display:flex><span>kafka                               default     1           2021-12-07 12:48:47.066421971 -0800 PST deployed    kafka-14.4.1                    2.8.1
</span></span><span style=display:flex><span>mongodb                             default     1           2021-12-07 12:49:06.132771625 -0800 PST deployed    mongodb-10.29.2                 4.4.10
</span></span><span style=display:flex><span>splunk-otel-collector-1638910184    default     1           2021-12-07 12:49:45.694013749 -0800 PST deployed    splunk-otel-collector-0.37.1    0.37.1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ kubectl get pods
</span></span><span style=display:flex><span>NAME                                                              READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>kafka-zookeeper-0                                                 1/1     Running   0          18m
</span></span><span style=display:flex><span>kafka-2                                                           2/2     Running   1          18m
</span></span><span style=display:flex><span>mongodb-79cf87987f-gsms8                                          2/2     Running   0          18m
</span></span><span style=display:flex><span>kafka-1                                                           2/2     Running   1          18m
</span></span><span style=display:flex><span>kafka-exporter-7c65fcd646-dvmtv                                   1/1     Running   3          18m
</span></span><span style=display:flex><span>kafka-0                                                           2/2     Running   1          18m
</span></span><span style=display:flex><span>splunk-otel-collector-1638910184-agent-27s5c                      2/2     Running   0          17m
</span></span><span style=display:flex><span>splunk-otel-collector-1638910184-k8s-cluster-receiver-8587qmh9l   1/1     Running   0          17m
</span></span></code></pre></div><h3 id=7-verify-dashboards>7. Verify dashboards</h3><p>Verify that out of the box dashboards for Kafka, MongoDB and Zookeeper are populated in the Infrastructure Monitor landing page. Drill down into each component to view granular details for each service.</p><ul><li>Infrastructure Monitoring Landing page:</li></ul><p><img src=../images/imlp.png alt=IM-landing-page></p><ul><li>K8 Navigator:</li></ul><p><img src=../images/k8nav.png alt=k8-navigator></p><ul><li>MongoDB Dashboard:</li></ul><p><img src=../images/mongodash.png alt=mongodb-dash></p><ul><li>Kafka Dashboard:</li></ul><p><img src=../images/kafkadash.png alt=kafka-dash></p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/splunk/observability-workshop aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Splunk Inc. All Rights Reserved</small></div></div></div></footer></div><script src=/observability-workshop/v4.54/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.54/js/tabpane-persist.js></script>
<script>const svgCopy='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',svgCheck='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>',addCopyButtons=e=>{document.querySelectorAll("pre > code").forEach(t=>{const n=document.createElement("button");n.className="clipboard-button",n.type="button",n.innerHTML=svgCopy,n.addEventListener("click",()=>{textToCopy=t.innerText.replace(/^\s*\n/gm,""),console.log(textToCopy),e.writeText(textToCopy).then(()=>{n.blur(),n.innerHTML=svgCheck,setTimeout(()=>n.innerHTML=svgCopy,2e3)},e=>n.innerHTML="Error")});const s=t.parentNode;s.parentNode.insertBefore(n,s)})};if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",e.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",e.crossOrigin="anonymous",e.onload=()=>addCopyButtons(clipboard),document.body.appendChild(e)}</script></body></html>