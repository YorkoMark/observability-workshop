<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/observability-workshop/v4.54/favicons/favicon.ico><link rel=apple-touch-icon href=/observability-workshop/v4.54/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/observability-workshop/v4.54/favicons/android-192x192.png sizes=192x192><title>Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace | Splunk Observability Cloud Workshops</title><meta name=description content="1. New Kubernetes Navigator 2.0 UI As we are in the process of switching to the new generation of the Kubernetes Navigator, please check if you are already on the new Kubernetes navigator.
When you select Infrastructure from the main menu on the left, followed by selecting Kubernetes, you should see two services panes for Kubernetes, similar like the ones below:
If you are taken straight to the Kubernetes Navigator v1 Map view after selecting Kubernetes, you need to opt-in to the new Navigator yourself for this workshop by clicking on the big blue ."><meta property="og:title" content="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace"><meta property="og:description" content="1. New Kubernetes Navigator 2.0 UI As we are in the process of switching to the new generation of the Kubernetes Navigator, please check if you are already on the new Kubernetes navigator.
When you select Infrastructure from the main menu on the left, followed by selecting Kubernetes, you should see two services panes for Kubernetes, similar like the ones below:
If you are taken straight to the Kubernetes Navigator v1 Map view after selecting Kubernetes, you need to opt-in to the new Navigator yourself for this workshop by clicking on the big blue ."><meta property="og:type" content="article"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v4.54/tko/session-5/docs/deploy-otel/"><meta property="article:section" content="tko"><meta property="article:modified_time" content="2023-02-06T13:51:24-05:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta itemprop=name content="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace"><meta itemprop=description content="1. New Kubernetes Navigator 2.0 UI As we are in the process of switching to the new generation of the Kubernetes Navigator, please check if you are already on the new Kubernetes navigator.
When you select Infrastructure from the main menu on the left, followed by selecting Kubernetes, you should see two services panes for Kubernetes, similar like the ones below:
If you are taken straight to the Kubernetes Navigator v1 Map view after selecting Kubernetes, you need to opt-in to the new Navigator yourself for this workshop by clicking on the big blue ."><meta itemprop=dateModified content="2023-02-06T13:51:24-05:00"><meta itemprop=wordCount content="820"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace"><meta name=twitter:description content="1. New Kubernetes Navigator 2.0 UI As we are in the process of switching to the new generation of the Kubernetes Navigator, please check if you are already on the new Kubernetes navigator.
When you select Infrastructure from the main menu on the left, followed by selecting Kubernetes, you should see two services panes for Kubernetes, similar like the ones below:
If you are taken straight to the Kubernetes Navigator v1 Map view after selecting Kubernetes, you need to opt-in to the new Navigator yourself for this workshop by clicking on the big blue ."><link rel=preload href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css as=style><link href=/observability-workshop/v4.54/scss/main.min.0e73693ebf0ee8a544416f412294cfbba2caebea9d2f0b07dc913f9e826b1ca6.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1><a class=navbar-brand href=/observability-workshop/v4.54/><span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div></nav><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/imt/><i class='fa-regular fa-sitemap'></i><span>Splunk IM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/apm/><i class='fa-solid fa-code-fork'></i><span>Splunk APM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/synthetics/><i class='fa-brands fa-chrome'></i><span>Splunk Synthetics</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/rum/><i class='fa-regular fa-chalkboard-user'></i><span>Splunk RUM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/observability-workshop/v4.54/oncall/><i class="fa-regular fa-phone-flip"></i><span>Splunk OnCall</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>More Workshops</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/pet-clinic/>Pet Clinic Java Workshop</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/bootcamp/>O11y Bootcamp</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/resources/>Resources</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Releases</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://splunk.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.53>v4.53</a>
<a class=dropdown-item href=https://splunk.github.io/observability-workshop/v4.54>v4.54</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/observability-workshop/v4.54/offline-search-index.dd951ac1c98794d85a942e6a9fe80b1f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/observability-workshop/v4.54/ja/>日本語</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tko-li><a href=/observability-workshop/v4.54/tko/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-observability-workshopv454tko><span>TKO Workshops</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-1-li><a href=/observability-workshop/v4.54/tko/session-1/ title="1. Role Play Qualification / Discovery - with SRE and ITOPs" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-1><span>Session 1</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-2-li><a href=/observability-workshop/v4.54/tko/session-2/ title="2. Getting Data In (GDI) & OTEL" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-2><span>Session 2</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsintro-li><a href=/observability-workshop/v4.54/tko/session-2/docs/intro/ title="Intro to O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsintro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsgetting_started-li><a href=/observability-workshop/v4.54/tko/session-2/docs/getting_started/ title="Getting Started with O11y GDI - Real Time Enrichment Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsgetting_started><span>Getting started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsdeploy-li><a href=/observability-workshop/v4.54/tko/session-2/docs/deploy/ title="Deploy complex environments and capture meterics" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsdeploy><span>Deployment</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docscode_to_python-li><a href=/observability-workshop/v4.54/tko/session-2/docs/code_to_python/ title="Code to Kubernetes - Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docscode_to_python><span>Code to Kubernetes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsinstrument-li><a href=/observability-workshop/v4.54/tko/session-2/docs/instrument/ title="Instrument REVIEWS for Tracing" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsinstrument><span>Instrumentation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-2docsforwarder-li><a href=/observability-workshop/v4.54/tko/session-2/docs/forwarder/ title="Monitor System Logs with Splunk Universal Forwarder" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-2docsforwarder><span>UF Deployment</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-3-li><a href=/observability-workshop/v4.54/tko/session-3/ title="3. ITOps Monitoring Monitoring Monitoring" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-3><span>Session 3</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-4-li><a href=/observability-workshop/v4.54/tko/session-4/ title="4. ITOps - Understanding Event Analytics in Realistic Business Services" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-4><span>Session 4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv454tkosession-5-li><a href=/observability-workshop/v4.54/tko/session-5/ title="5. How Platform Engineers Observe Kubernetes - Workshop" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-5><span>Session 5</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-observability-workshopv454tkosession-5docsdeploy-otel-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-otel/ title="Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-otel><span class=td-sidebar-nav-active-item>Deploying the OTel Collector</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docscheck-new-navigator-li><a href=/observability-workshop/v4.54/tko/session-5/docs/check-new-navigator/ title="The New Kubernetes Navigator" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docscheck-new-navigator><span>Touring the Kubernetes Navigator v2</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-apache><span>Deploying PHP/Apache</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsfix-apache-li><a href=/observability-workshop/v4.54/tko/session-5/docs/fix-apache/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsfix-apache><span>Fix PHP/Apache Issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen-li><a href=/observability-workshop/v4.54/tko/session-5/docs/deploy-loadgen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsdeploy-loadgen><span>Deploy Load Generator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docssetup-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/setup-hpa/ title="Setup Horizontal Pod Autoscaling (HPA)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docssetup-hpa><span>Setup HPA</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-5docsedit-hpa-li><a href=/observability-workshop/v4.54/tko/session-5/docs/edit-hpa/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-5docsedit-hpa><span>Increase HPA Replicas</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv454tkosession-6-li><a href=/observability-workshop/v4.54/tko/session-6/ title="6. O11y - Distributed Tracing for modern applications" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv454tkosession-6><span>Session 6</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docssetup-li><a href=/observability-workshop/v4.54/tko/session-6/docs/setup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docssetup><span>Setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsvalidate_traces-li><a href=/observability-workshop/v4.54/tko/session-6/docs/validate_traces/ title="Validate Traces are being collected" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsvalidate_traces><span>Validate Traces</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsdeveloper_role-li><a href=/observability-workshop/v4.54/tko/session-6/docs/developer_role/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsdeveloper_role><span>Developer Role</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docscustom_attribution-li><a href=/observability-workshop/v4.54/tko/session-6/docs/custom_attribution/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docscustom_attribution><span>Custom Attribution</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfix_issue-li><a href=/observability-workshop/v4.54/tko/session-6/docs/fix_issue/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfix_issue><span>Fix the issue</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsroot_cause-li><a href=/observability-workshop/v4.54/tko/session-6/docs/root_cause/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsroot_cause><span>Root Cause Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsbuild_again-li><a href=/observability-workshop/v4.54/tko/session-6/docs/build_again/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsbuild_again><span>Build and Deploy again</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv454tkosession-6docsfinal_fix-li><a href=/observability-workshop/v4.54/tko/session-6/docs/final_fix/ title="The Final Fix!" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv454tkosession-6docsfinal_fix><span>Developer Role (Part 2)</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#1-new-kubernetes-navigator-20-ui>1. New Kubernetes Navigator 2.0 UI</a></li><li><a href=#2-connect-to-ec2-instance>2. Connect to EC2 instance</a></li><li><a href=#3-namespaces-in-kubernetes>3. Namespaces in Kubernetes</a></li><li><a href=#4-install-splunk-otel-using-helm>4. Install Splunk OTel using Helm</a></li><li><a href=#5-verify-deployment>5. Verify Deployment</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/>TKO Workshops</a></li><li class=breadcrumb-item><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-5/>Session 5</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://splunk.github.io/observability-workshop/v4.54/tko/session-5/docs/deploy-otel/ aria-disabled=true class="btn-link disabled">Deploying the OTel Collector</a></li></ol></nav><div class=td-content><h1>Deploying the OpenTelemetry Collector in Kubernetes using a NameSpace</h1><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>&nbsp; 4 minute read &nbsp;</p></header><h2 id=1-new-kubernetes-navigator-20-ui>1. New Kubernetes Navigator 2.0 UI</h2><p>As we are in the process of switching to the new generation of the Kubernetes Navigator, please check if you are already on the new Kubernetes navigator.</p><p>When you select <strong>Infrastructure</strong> from the main menu on the left, followed by selecting <strong>Kubernetes</strong>, you should see two services panes for Kubernetes, similar like the ones below:</p><p><img src=../images/k8s-nav2-two.png alt=k8s-navi-v-2></p><p>If you are taken straight to the Kubernetes Navigator v1 Map view after selecting <strong>Kubernetes</strong>, you need to opt-in to the new Navigator yourself for this workshop by clicking on the big blue <img src=../images/new-k8s-button.png alt=new-k8-button>. You should now be in the K8s Node view with chart below the cluster map similar like shown below:</p><p><img src=../images/new-k8s-view.png alt=k8s-navi-v-2></p><div class="alert alert-info" role=alert><p class=alert-heading>Note</p><div class=alert-body><p class=p-alert-body><p>If you actually see three services for Kubernetes including one that is named <code>K8s clusters</code>, you need to turn off Precognition in the Superpowers view.
To do this, please change the Url in your browser to match the following: <a href=https://app.[REALM].signalfx.com/#/superpowers target=_blank>https://app.[REALM].signalfx.com/#/superpowers</a></p><p>where [REALM] needs to match the Realm we are using for this workshop then remove the Precognition flag like in the example below. This is one of the first options you can set:</p><p><img src=../images/Precognition.png alt=Set-Precognition></p><p>Once its unset, you can refresh your page and reselect Kubernetes from the Infrastructure Navigator menu.</p></p></div></div><h2 id=2-connect-to-ec2-instance>2. Connect to EC2 instance</h2><p>You will be able to connect to the workshop instance by using SSH from your Mac, Linux or Windows device.</p><p>To use SSH, open a terminal on your system and type <code>ssh ubuntu@x.x.x.x</code> (replacing x.x.x.x with the IP address assigned to you).</p><div class="alert alert-info" role=alert><p class=alert-heading>Note</p><div class=alert-body><p class=p-alert-body>Your workshop instance has been pre-configured with the correct <code>ACCESS_TOKEN</code> and <code>REALM</code> for this workshop. There is no need for you to configure these.</p></div></div><h2 id=3-namespaces-in-kubernetes>3. Namespaces in Kubernetes</h2><p>Most of our customers will make use of some kind of private or public cloud service to run Kubernetes. They often choose to have only a few large Kubernetes clusters as it is easier to manage centrally.</p><p>Namespaces are a way to organize these large Kubernetes clusters into virtual sub-clusters. This can be helpful when different teams or projects share a Kubernetes cluster as this will give them the easy ability to just see and work with their own stuff.</p><p>Any number of namespaces are supported within a cluster, each logically separated from others but with the ability to communicate with each other. Components are only &ldquo;visible&rdquo; when selecting a namespace or when adding the <code>--all-namespaces</code> flag to <code>kubectl</code> instead of allowing you to view just the components relevant to your project by selecting your namespace.</p><p>Most customers will want to install the Splunk OpenTelemetry Collector in a separate namespace. This workshop will follow that practice.</p><h2 id=4-install-splunk-otel-using-helm>4. Install Splunk OTel using Helm</h2><p>Install the OpenTelemetry Collector using the Splunk Helm chart. First, add the Splunk Helm chart repository and update.</p><ul class="nav nav-tabs" id=tabs-2 role=tablist><li class=nav-item><a class="nav-link active persistLang-sh" id=tabs-02-00-tab data-toggle=tab href=#tabs-02-00 role=tab onclick='persistLang("sh")' aria-controls=tabs-02-00 aria-selected=false>Helm Repo Add</a></li><li class=nav-item><a class="nav-link persistLang-text" id=tabs-02-01-tab data-toggle=tab href=#tabs-02-01 role=tab onclick='persistLang("text")' aria-controls=tabs-02-01 aria-selected=false>Helm Repo Add Output</a></li></ul><div class=tab-content id=tabs-2-content><div class="tab-pane fade show active" id=tabs-02-00 role=tabpanel aria-labelled-by=tabs-02-00-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm repo add splunk-otel-collector-chart https://signalfx.github.io/splunk-otel-collector-chart <span style=color:#555>&amp;&amp;</span> helm repo update</span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-02-01 role=tabpanel aria-labelled-by=tabs-02-01-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Using ACCESS_TOKEN={REDACTED}
</span></span><span style=display:flex><span>Using REALM=eu0
</span></span><span style=display:flex><span>&#34;splunk-otel-collector-chart&#34; has been added to your repositories
</span></span><span style=display:flex><span>Using ACCESS_TOKEN={REDACTED}
</span></span><span style=display:flex><span>Using REALM=eu0
</span></span><span style=display:flex><span>Hang tight while we grab the latest from your chart repositories...
</span></span><span style=display:flex><span>...Successfully got an update from the &#34;splunk-otel-collector-chart&#34; chart repository
</span></span><span style=display:flex><span>Update Complete. ⎈Happy Helming!⎈</span></span></code></pre></div></div></div><p>Install the OpenTelemetry Collector Helm chart into the <code>splunk</code> namespace with the following commands, do <strong>NOT</strong> edit this:</p><ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item><a class="nav-link active persistLang-sh" id=tabs-03-00-tab data-toggle=tab href=#tabs-03-00 role=tab onclick='persistLang("sh")' aria-controls=tabs-03-00 aria-selected=false>Helm Install</a></li></ul><div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-03-00 role=tabpanel aria-labelled-by=tabs-03-00-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm install splunk-otel-collector <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--set<span style=color:#555>=</span><span style=color:#c30>&#34;splunkObservability.realm=</span><span style=color:#033>$REALM</span><span style=color:#c30>&#34;</span> <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--set<span style=color:#555>=</span><span style=color:#c30>&#34;splunkObservability.accessToken=</span><span style=color:#033>$ACCESS_TOKEN</span><span style=color:#c30>&#34;</span> <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--set<span style=color:#555>=</span><span style=color:#c30>&#34;clusterName=</span><span style=color:#069;font-weight:700>$(</span>hostname<span style=color:#069;font-weight:700>)</span><span style=color:#c30>-k3s-cluster&#34;</span> <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--set<span style=color:#555>=</span><span style=color:#c30>&#34;splunkObservability.logsEnabled=true&#34;</span> <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--set<span style=color:#555>=</span><span style=color:#c30>&#34;splunkObservability.infrastructureMonitoringEventsEnabled=true&#34;</span> <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>splunk-otel-collector-chart/splunk-otel-collector <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--namespace splunk <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>--create-namespace <span style=color:#c30;font-weight:700>\
</span></span></span><span style=display:flex><span><span style=color:#c30;font-weight:700></span>-f ~/workshop/k3s/splunk-defaults.yaml</span></span></code></pre></div></div></div><h2 id=5-verify-deployment>5. Verify Deployment</h2><p>You can monitor the progress of the deployment by running <code>kubectl get pods</code> and adding <code>-n splunk</code> to the command to see the pods in the <code>splunk</code> NameSpace which should typically report that the new pods are up and running after about 30 seconds.</p><p>Ensure the status is reported as <strong>Running</strong> before continuing.</p><ul class="nav nav-tabs" id=tabs-4 role=tablist><li class=nav-item><a class="nav-link active persistLang-sh" id=tabs-04-00-tab data-toggle=tab href=#tabs-04-00 role=tab onclick='persistLang("sh")' aria-controls=tabs-04-00 aria-selected=false>kubectl get pods</a></li><li class=nav-item><a class="nav-link persistLang-text" id=tabs-04-01-tab data-toggle=tab href=#tabs-04-01 role=tab onclick='persistLang("text")' aria-controls=tabs-04-01 aria-selected=false>kubectl get pods Output</a></li></ul><div class=tab-content id=tabs-4-content><div class="tab-pane fade show active" id=tabs-04-00 role=tabpanel aria-labelled-by=tabs-04-00-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl get pods -n splunk</span></span></code></pre></div></div><div class="tab-pane fade" id=tabs-04-01 role=tabpanel aria-labelled-by=tabs-04-01-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>NAME                                                          READY   STATUS    RESTARTS   AGE
</span></span><span style=display:flex><span>splunk-otel-collector-agent-pvstb                             2/2     Running   0          19s
</span></span><span style=display:flex><span>splunk-otel-collector-k8s-cluster-receiver-6c454894f8-mqs8n   1/1     Running   0          19s</span></span></code></pre></div></div></div><div class="alert alert-info" role=alert><p class=alert-heading>Note</p><div class=alert-body><p class=p-alert-body><p>If you are using the Kubernetes Integration setup from the Data Management page from the O11y UI , you find that the guide will use
<code>--generate-name splunk-otel-collector-chart/splunk-otel-collector</code> instead of just <code>splunk-otel-collector-chart/splunk-otel-collector</code> as we do in the above example.</p><p>This will generate an unique name/label for the collector install and Pods by adding a unique number at the end of the object name, allowing you to install multiple collectors in your Kubernetes environment with different configurations.</p><p>Just make sure you use the correct label that is generated by the Helm chart if you wish to use the <code>helm</code> and <code>kubectl</code> commands from this workshop on an install done with the <code>--generate-name</code> option.</p></p></div></div><p>Use the label set by the <code>helm</code> install to tail logs (You will need to press <code>ctrl + c</code> to exit).</p><ul class="nav nav-tabs" id=tabs-6 role=tablist><li class=nav-item><a class="nav-link active persistLang-sh" id=tabs-06-00-tab data-toggle=tab href=#tabs-06-00 role=tab onclick='persistLang("sh")' aria-controls=tabs-06-00 aria-selected=false>kubectl logs</a></li></ul><div class=tab-content id=tabs-6-content><div class="tab-pane fade show active" id=tabs-06-00 role=tabpanel aria-labelled-by=tabs-06-00-tab><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl logs -l <span style=color:#033>app</span><span style=color:#555>=</span>splunk-otel-collector -f --container otel-collector -n splunk</span></span></code></pre></div></div></div><p>Or use the installed <code>k9s</code> terminal UI.</p><p><img src=../images/k9s.png alt=k9s></p><div class="alert alert-danger" role=alert><p class=alert-heading>Deleting a failed installation</p><div class=alert-body><p class=p-alert-body><p>If you make an error installing the Splunk OpenTelemetry Collector you can start over by deleting the installation using:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>helm delete splunk-otel-collector -n splunk
</span></span></code></pre></div></p></div></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/splunk/observability-workshop aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Splunk Inc. All Rights Reserved</small></div></div></div></footer></div><script src=/observability-workshop/v4.54/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.54/js/tabpane-persist.js></script>
<script>const svgCopy='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',svgCheck='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>',addCopyButtons=e=>{document.querySelectorAll("pre > code").forEach(t=>{const n=document.createElement("button");n.className="clipboard-button",n.type="button",n.innerHTML=svgCopy,n.addEventListener("click",()=>{textToCopy=t.innerText.replace(/^\s*\n/gm,""),console.log(textToCopy),e.writeText(textToCopy).then(()=>{n.blur(),n.innerHTML=svgCheck,setTimeout(()=>n.innerHTML=svgCopy,2e3)},e=>n.innerHTML="Error")});const s=t.parentNode;s.parentNode.insertBefore(n,s)})};if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",e.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",e.crossOrigin="anonymous",e.onload=()=>addCopyButtons(clipboard),document.body.appendChild(e)}</script></body></html>