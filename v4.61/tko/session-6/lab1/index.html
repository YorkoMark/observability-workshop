<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.11.2+tip"><meta name=description content="Splunk Observability Workshops"><title>6. O11y - Distributed Tracing for modern applications :: Splunk Observability Cloud Workshops</title><link href=../../../tko/session-6/lab1/index.xml rel=alternate type=application/rss+xml title="6. O11y - Distributed Tracing for modern applications :: Splunk Observability Cloud Workshops"><link href=../../../tko/session-6/lab1/index.print.html rel=alternate type=text/html title="6. O11y - Distributed Tracing for modern applications :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1676653286 rel=icon type=image/x-icon><link href=../../../css/fontawesome-all.min.css?1676653286 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1676653286 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1676653286 rel=stylesheet><link href=../../../css/auto-complete.css?1676653286 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1676653286 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1676653286 rel=stylesheet><link href=../../../css/fonts.css?1676653286 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1676653286 rel=stylesheet></noscript><link href=../../../css/theme.css?1676653286 rel=stylesheet><link href=../../../css/theme-splunk-light.css?1676653286 rel=stylesheet id=variant-style><link href=../../../css/variant.css?1676653286 rel=stylesheet><link href=../../../css/print.css?1676653286 rel=stylesheet media=print><link href=../../../css/ie.css?1676653286 rel=stylesheet><script src=../../../js/url.js?1676653286></script>
<script src=../../../js/variant.js?1676653286></script>
<script>window.index_js_url="../../../index.search.js";var root_url="../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v4.61/",window.variants&&variants.init(["splunk-light","splunk-dark","aws"])</script></head><body class="mobile-support html disableInlineCopyToClipboard" data-url=../../../tko/session-6/lab1/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next topbar-link" href=../../../tko/session-6/lab2/index.html title="Build a Distributed Trace in Lambda (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev topbar-link" href=../../../tko/session-6/index.html title="6. O11y - Distributed Tracing for modern applications (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=top-print-link><a class="print-link topbar-link" title='Print whole chapter (CTRL+ALT+p)' href=../../../tko/session-6/lab1/index.print.html><i class="fas fa-print fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../tko/index.html><span itemprop=name>TKO Workshops</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../tko/session-6/index.html><span itemprop=name>6. O11y - Distributed Tracing for modern applications</span></a><meta itemprop=position content="3">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>6. O11y - Distributed Tracing for modern applications</span><meta itemprop=position content="4"></li></ol></div><div class="default-animation progress"><div class=toc-wrapper><nav id=TableOfContents><ul><li><a href=#set-environment-variables>Set Environment Variables</a></li><li><a href=#build-and-deploy-application>Build and Deploy Application</a></li><li><a href=#users-and-workflows>Users and Workflows</a></li><li><a href=#today-we-will-learn>Today we will learn</a></li><li><a href=#lets-define-a-few-terms-for-those-new-to-apm--software-development-or-java>Let&rsquo;s define a few terms for those new to APM / Software Development or Java</a></li><li><a href=#view-service-map>View Service Map</a></li><li><a href=#now-lets-play-the-role-of-the-developer>Now let&rsquo;s play the role of the developer</a></li><li><a href=#debugging-101-the-line-by-line-method>Debugging 101, the Line by Line method</a></li><li><a href=#custom-attribution>Custom Attribution</a></li><li><a href=#run-manual-instrumentation-tool>Run Manual Instrumentation Tool</a></li><li><a href=#rebuild-and-deploy-application>Rebuild and Deploy Application</a></li><li><a href=#how-did-we-get-here--how-did-the-999-end-up-in-the-trace-as-a-custom-attribute->How did we get here ? How did the 999 end up in the trace as a Custom Attribute ?</a></li><li><a href=#lets-go-see-if-our-manual-instrumentation-uncovered-any-other-issues-we-did-not-see-before>Let&rsquo;s go see if our manual instrumentation uncovered any other issues we did not see before</a></li><li><a href=#lets-play-developer-once-again-and-fix-our-issue>Let&rsquo;s play Developer once again and fix our issue</a></li><li><a href=#rebuild-and-deploy-application-1>Rebuild and Deploy Application</a></li><li><a href=#we-are-nearly-done-one-more-location-to-go-chicago>We are nearly done, one more location to go&mldr; Chicago</a></li><li><a href=#lets-play-developer-again>Let&rsquo;s play developer again</a><ul><li><a href=#build-and-deploy-application-1>Build and Deploy Application</a></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=6-o11y---distributed-tracing-for-modern-applications>6. O11y - Distributed Tracing for modern applications</h1><h2 id=set-environment-variables>Set Environment Variables</h2><p>Environment Variables:</p><p>Using nano edit .env in <code>javashop-otel</code> directory</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano .env
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#c4a000>SHOP_USER</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&lt;your_name&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c4a000>SPLUNK_ACCESS_TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&lt;your_token&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c4a000>SPLUNK_REALM</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&lt;your_realm&gt;</span>
</span></span></code></pre></div><p>Save in nano</p><p>CTRL-O ENTER</p><p>Exit nano</p><p>CTRL-X</p><h2 id=build-and-deploy-application>Build and Deploy Application</h2><p>Let&rsquo;s get started by building and deploying our Application, the Buttercup Instrument Shop. Run the commands below to begin and start reading ahead as your traces are coming up !</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> javashop-otel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./BuildAndDeploy.sh
</span></span></code></pre></div><h2 id=users-and-workflows>Users and Workflows</h2><p>As we go through this workshop we will be switching roles from SRE to Developer. First we will start with alert responders or SREs who will identify an issue in Splunk Observability UI. Next, we will jump to a Developer Role to see how a Developer will debug and repair/fix a software problem using trace data provided by our SRE.</p><p>Of course, we are not requiring 2 people for this workshop as each participant will play both roles.</p><h2 id=today-we-will-learn>Today we will learn</h2><p>Today we will learn the type of data ( In the form of a trace ) that an SRE or alert responder would send to a developer to then repair/fix software. We will do this with both Auto-Instrumentation data and Custom attributes, via Manual Instrumentation data.</p><p>While we will be spending time Debugging code, &mldr;. Don&rsquo;t worry, &mldr;there is no programming experience necessary, as our goal here is for everyone in the audience to understand how using Custom Attributes in Splunk APM @ Full Fidelity can accelerate Mean Time to Repair Software problems for our customers.</p><p>Translated, Developers are High Cost resources, with high opportunity cost. Less time on fixing problems = more time for features.</p><h2 id=lets-define-a-few-terms-for-those-new-to-apm--software-development-or-java>Let&rsquo;s define a few terms for those new to APM / Software Development or Java</h2><ol><li>What&rsquo;s a Function in Java ?
A Function in most languages including Java, is a logical chunk of code when executed that solves a repeatable task. This is basically what our customers&rsquo; Dev teams spend their time building and where software issues will most commonly be.</li><li>What&rsquo;s a Method in Java ?
See What&rsquo;s a function -> Function and method are synonymous.</li><li>What&rsquo;s an Exception in Java ?
An Exceptional error condition that indicates abnormal or unhandled condition, that interrupts program execution abnormally.</li></ol><h2 id=view-service-map>View Service Map</h2><p>Please note it may take 3-4 minutes for traces to show up and you will see full map &ldquo;form&rdquo; as traces are coming in, so you may have to refresh the page a few times each time we Build and Deploy.</p><p>It is recommended to use a -5m look back during this lab. Start there, use 15 if you feel you have to.</p><p><a href=#image-853f9756a4b27b556a726caf1c36878c class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/218923108-6c6a7efb-588e-4f7b-b788-768037eae4bb.png alt="Service Map" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-853f9756a4b27b556a726caf1c36878c><img src=https://user-images.githubusercontent.com/32849847/218923108-6c6a7efb-588e-4f7b-b788-768037eae4bb.png alt="Service Map" class=lightbox-image loading=lazy></a></p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> NOTE</div><div class=box-content><p>Typically, to identify root cause and route an issue, an SRE or alert responder would check metrics and logs to determine if it is a software or hardware related issue, and thus route to the correct party. In this exercise we are ONLY handling software issues, so we are skipping the metrics and logs parts of normal triage.</p></div></div><p>If your instrumentation was successful, the service-map will show latency from the shop service to the products service.</p><p><a href=#image-3ea944b8c9a0dd12c0c5967ee7307b68 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/206541846-7f0e6462-7659-44bc-bc48-3621c2872fc4.png alt="Screen Shot 2022-12-08 at 11 48 58 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-3ea944b8c9a0dd12c0c5967ee7307b68><img src=https://user-images.githubusercontent.com/32849847/206541846-7f0e6462-7659-44bc-bc48-3621c2872fc4.png alt="Screen Shot 2022-12-08 at 11 48 58 AM" class=lightbox-image loading=lazy></a></p><p>Ok let&rsquo;s triage this SOFTWARE ISSUE and skip directly to the traces.</p><ul><li>Click on shop service</li><li>Click Traces ( right side )</li><li>Sort by Duration</li></ul><p>Select the longest duration trace ( or one of the obvious much longer ones )</p><p><a href=#image-71d3cefc713a0f08cdc69ac9172a8e34 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204347798-4f232b7f-7a7a-483f-9d61-f0b535e9ecf0.png alt=LongTrace style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-71d3cefc713a0f08cdc69ac9172a8e34><img src=https://user-images.githubusercontent.com/32849847/204347798-4f232b7f-7a7a-483f-9d61-f0b535e9ecf0.png alt=LongTrace class=lightbox-image loading=lazy></a></p><p>Now we can see the long latency occurred in the products service and if we click on products: /products
we can see the offending method was products:ProductResource.getAllProducts</p><p><a href=#image-3354b5072c8ceef635e8ce1ca30d8dff class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204347855-724545bf-c3df-478a-a27d-e4f85f708e15.png alt=long-trace-detail-GetAllProducts style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-3354b5072c8ceef635e8ce1ca30d8dff><img src=https://user-images.githubusercontent.com/32849847/204347855-724545bf-c3df-478a-a27d-e4f85f708e15.png alt=long-trace-detail-GetAllProducts class=lightbox-image loading=lazy></a></p><p>Our next step here would be to send that trace to a developer by clicking download trace and
they will have to debug the function. Since we will be the developer there is no need to download the trace. Just remember that is normal workflow for alert responders to route an issue to the &ldquo;Repairers&rdquo; while providing trace data.</p><p>Before we do that please take note of the Tags available for the developer to leverage to find the root cause. We see standard out of the box Otel tags on the span, environmental information, but no indications of data specific to something inside custom code ( which is where the problem always is. )</p><h2 id=now-lets-play-the-role-of-the-developer>Now let&rsquo;s play the role of the developer</h2><p>As a developer we must debug the function products:ProductResource.getAllProducts to find the problem.</p><h2 id=debugging-101-the-line-by-line-method>Debugging 101, the Line by Line method</h2><p>Without anything to go on other than &ldquo;BAD FUNCTION&rdquo;, a Developer must then look at code visually line by line to find and fix the problem. To make this worse, Functions, call Functions and it can get very messy in bad code scenarios.</p><p>We will do the visual inspection method next.</p><p>Using Nano:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano products/src/main/java/com/shabushabu/javashop/products/resources/ProductResource.java
</span></span></code></pre></div><p>Search in Nano
CTRL-W</p><p>Enter in: getAllProducts</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  <span style=color:#5c35cc;font-weight:700>@GET</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Response</span> <span style=color:#000>getAllProducts</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#5c35cc;font-weight:700>@DefaultValue</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;California&#34;</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#5c35cc;font-weight:700>@QueryParam</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;location&#34;</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#000>String</span> <span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic>// STEP X: All we know right now is somewhere in this function, latency was introduced.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction1</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction2</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction10</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction13</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction5</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>     <span style=color:#000>myCoolFunction6</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>We can see here in getAllProducts, the first call is to myCoolFunction1(), so as may have guessed our next step is to go look at myCoolFunction1()</p><p>Search in Nano
CTRL-W</p><p>Enter in: myCoolFunction1</p><p>CTRL-W</p><p>Enter in: ENTER</p><p>Keep doing that until you get to the actual function definition, it looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>myCoolFunction1</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>// Generate a FAST sleep of 0 time !
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>      <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>sleepy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>lookupLocation1</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>location</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>try</span><span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>Thread</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>sleep</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>sleepy</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>Now, myCoolFunction1 calls lookupLocation1(location)</p><p>Search in Nano
CTRL-W</p><p>Enter in: lookupLocation1</p><p>I think you get the picture by now, you have no choice but to inspect every line of code and every function called and visually inspect them for problems. This can be a VERY long process and kills our customers Mean time to Repair. This happens quite often to our customers with our competition because they can&rsquo;t provide all the traces 100% of the time and most can&rsquo;t scale to add more data, via Custom Attributes on top of that !</p><p>Remember, without Full Fidelity, you have to either reproduce errors / latency in another environment or inspect code line by line.</p><p>So they are stuck where we are, quite often.</p><p>OK, enough fun ..let&rsquo;s make this easier for our developer&mldr; and show off some Splunk APM Scale!</p><p>OK, exit your editor:</p><p>Edit nano CTRL-X ( DO NOT SAVE IF MODIFIED )</p><h2 id=custom-attribution>Custom Attribution</h2><p>To take a deeper look at this issue and make this much easier to debug we will implement Custom Attributes via Opentelemetry Manual Instrumentation.</p><p>To speed up manual instrumentation in Java you can leverage <a href=https://opentelemetry.io/docs/instrumentation/java/automatic/annotations/ target=_blank>OpenTelemetry Annotations</a>, which automatically create a span around a method without modifying the actual code inside the method. This can be very valuable if you are working with an SRE that may have limited access to source code changes.</p><p>To add even more information to help our developers find the root cause faster,
<a href=https://opentelemetry.io/docs/instrumentation/java/automatic/annotations/ target=_blank>OpenTelemetry Annotations</a> can be used to generate span tags with parameter values for the method in question. This is incredibly important to mean time to Repair, because as a Developer, if I know the parameter values of a function at the time of latency or error, I can debug this without having to reproduce an issue in another environment if I have Full Fidelity Tracing.</p><p>Splunk Full Fidelity APM allows our customers&rsquo; development teams to debug their code as it runs in production, 100% of the time . With Custom Attribution, you are providing repeatable Mean Time to Repair reduction&mldr; 100% of the time, only with Full Fidelity tracing.</p><p>To expedite manual instrumentation implementation for this exercise, we have provided a tool which will annotate the entirety of the &ldquo;shop&rdquo; and &ldquo;products&rdquo; services with OpenTelemetry standard annotations for every method call without having to write any code. This &ldquo;annotator&rdquo; tool will also tag every parameter in every function, which adds a span tag with Parameter=Value.</p><h2 id=run-manual-instrumentation-tool>Run Manual Instrumentation Tool</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> javashop-otel directory
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./AutomateManualInstrumentation.sh
</span></span></code></pre></div><h2 id=rebuild-and-deploy-application>Rebuild and Deploy Application</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./BuildAndDeploy.sh
</span></span></code></pre></div><p>Now that we have rebuilt and deployed our application, traffic is being sent once again.</p><p>Go back to the Splunk Observability UI and let&rsquo;s see if these annotations help us narrow down the root cause more quickly.</p><p>Let&rsquo;s try to find our latency root cause again, this time with every function and every parameter spanned and tagged respectively&mldr;. You will see exactly what this means and how it benefits developers in a moment&mldr;</p><p><a href=#image-69dff12a8d52a54a48c31398b2dce523 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/206541846-7f0e6462-7659-44bc-bc48-3621c2872fc4.png alt="Screen Shot 2022-12-08 at 11 48 58 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-69dff12a8d52a54a48c31398b2dce523><img src=https://user-images.githubusercontent.com/32849847/206541846-7f0e6462-7659-44bc-bc48-3621c2872fc4.png alt="Screen Shot 2022-12-08 at 11 48 58 AM" class=lightbox-image loading=lazy></a></p><ul><li>Click on shop service</li><li>Click Traces ( right side )</li><li>Sort by Duration</li></ul><p>Select the longest duration trace ( or one of the obvious much longer ones )</p><p><a href=#image-e49128433a127bcfa1f84e157b53a64e class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/213582624-66466a19-00fa-4dda-acd0-f6970d594ba1.png alt=image style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-e49128433a127bcfa1f84e157b53a64e><img src=https://user-images.githubusercontent.com/32849847/213582624-66466a19-00fa-4dda-acd0-f6970d594ba1.png alt=image class=lightbox-image loading=lazy></a></p><p>We can see that the actual function call that has the latency was not ProductResource.getAllProducts but the function call &ldquo;ProductResource.myCoolFunction234234234&rdquo; !</p><p>Since we now have the parameter tagged as part of our span metadata the actual root cause is seemingly related to the &ldquo;location&rdquo; Colorado ! And it appears the one custom attribute that was tagged for the function &ldquo;ProductResource.myCoolFunction234234234&rdquo; was &ldquo;myInt&rdquo; with a value of 999. With this information a Developer can debug very quickly.</p><p>Consider the case of debugging code which each of you have just experienced. Imagine that you may have not written the code yourself and the code is a mess, which I can tell you from a former developer, everyone else&rsquo;s code sucks&mldr;. So without Parameter Values at the time of the issue .. You would have no choice but to go line &mldr;. by line &mldr;.. by line&mldr;.. which I am sorry I forced you to do earlier&mldr; this can take a very long time.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> NOTE</div><div class=box-content><p>We added additional span information, which we call &ldquo;Custom Attributes&rdquo; here at Splunk, in this case our &ldquo;Custom Attributes&rdquo; are &ldquo;Parameter Values at Time of Latency&rdquo;.</p></div></div><p>In our example the &ldquo;Location&rdquo; tag was created due our handy Annotator, that did the <a href=https://opentelemetry.io/docs/instrumentation/java/automatic/annotations/ target=_blank>OpenTelemetry Annotations</a> for us.</p><p>Using nano:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano products/src/main/java/com/shabushabu/javashop/products/resources/ProductResource.java
</span></span></code></pre></div><p>Search in Nano
CTRL-W</p><p>Enter in: 999</p><p>We can see here, someone wrote some very bad code in the form of a long Sleep !</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>999</span><span style=color:#ce5c00;font-weight:700>==</span><span style=color:#000>myInt</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Thread</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>sleep</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>sleepy</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>nextInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5000</span> <span style=color:#ce5c00;font-weight:700>-</span> <span style=color:#0000cf;font-weight:700>3000</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>3000</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=how-did-we-get-here--how-did-the-999-end-up-in-the-trace-as-a-custom-attribute->How did we get here ? How did the 999 end up in the trace as a Custom Attribute ?</h2><p>Take a look at the function signature</p><p>private void myCoolFunction234234234(@SpanAttribute(&ldquo;myInt&rdquo;) int myInt)</p><p>@SpanAttribute(&ldquo;myint&rdquo;) is an Opentelemetry Java Annotation that was added by our Java Otel Annotator tool.</p><p>Let&rsquo;s fix our code.</p><p>Change this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>myCoolFunction234234234</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#5c35cc;font-weight:700>@SpanAttribute</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;myInt&#34;</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>myInt</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Generate a FAST sleep of 0 time !
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Random</span> <span style=color:#000>sleepy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Random</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>try</span><span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>999</span><span style=color:#ce5c00;font-weight:700>==</span><span style=color:#000>myInt</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>Thread</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>sleep</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>sleepy</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>nextInt</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5000</span> <span style=color:#ce5c00;font-weight:700>-</span> <span style=color:#0000cf;font-weight:700>3000</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#0000cf;font-weight:700>3000</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>){</span>
</span></span></code></pre></div><p>To this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>myCoolFunction234234234</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#5c35cc;font-weight:700>@SpanAttribute</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;myInt&#34;</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>myInt</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Generate a FAST sleep of 0 time !
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Random</span> <span style=color:#000>sleepy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Random</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>try</span><span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// if (999==myInt)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  Thread.sleep(
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  sleepy.nextInt(5000 - 3000)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  + 3000);
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>e</span><span style=color:#ce5c00;font-weight:700>){</span>
</span></span></code></pre></div><p>Using nano</p><p>place comments before every line in myCoolFunction234234234</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// if (999==myInt)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  Thread.sleep(
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  sleepy.nextInt(5000 - 3000)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  + 3000);
</span></span></span></code></pre></div><p>Write out changes in nano</p><p>CTRL-O</p><p>CTRL-X to exit.</p><p>Make sure you saved your changes to: products/src/main/java/com/shabushabu/javashop/products/resources/ProductResource.java</p><h2 id=lets-go-see-if-our-manual-instrumentation-uncovered-any-other-issues-we-did-not-see-before>Let&rsquo;s go see if our manual instrumentation uncovered any other issues we did not see before</h2><p>So you may be asking yourself, &ldquo;How does manual instrumentation alone show us &ldquo;more problems&rdquo; than before latency is latency is it ?</p><p>The answer is, with auto-instrumentation you are in most situations NOT covering functions our customers&rsquo; development teams wrote, which is of course the bulk of what developers do, they write functions&mldr;. and of course this is where the bulk of software problems occur.</p><p>You may have noticed a new exception in our trace that was not present with Auto-Instrumentation during our latency fix use-case. Since we skipped over this, let&rsquo;s walk you through it.</p><p>Return to the service map</p><ul><li>Click on shop service</li><li>Click Traces ( right side )</li><li>Select &ldquo;Errors Only&rdquo;</li></ul><p><a href=#image-f31858a0d71316e78b61ae0588cb9958 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204348492-84a4ad45-e11c-4e75-a6a9-d6e52e0eb13e.png alt="Screen Shot 2022-11-28 at 7 36 50 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f31858a0d71316e78b61ae0588cb9958><img src=https://user-images.githubusercontent.com/32849847/204348492-84a4ad45-e11c-4e75-a6a9-d6e52e0eb13e.png alt="Screen Shot 2022-11-28 at 7 36 50 AM" class=lightbox-image loading=lazy></a></p><p>Note: we haven&rsquo;t changed the code at all by adding annotations.</p><p>Click on a trace with an error present</p><p><a href=#image-7e34f55ed77011efc9b0bf88ca16dac5 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204348687-12241153-b297-4bd7-9ea8-4b410369e82c.png alt="Screen Shot 2022-11-28 at 7 38 33 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-7e34f55ed77011efc9b0bf88ca16dac5><img src=https://user-images.githubusercontent.com/32849847/204348687-12241153-b297-4bd7-9ea8-4b410369e82c.png alt="Screen Shot 2022-11-28 at 7 38 33 AM" class=lightbox-image loading=lazy></a></p><p>We can see our Exception is InvalidLocaleException !</p><p>The real problem must be related to the new data associated with SRI LANKA as the Exception says &ldquo;Non English Characters found in Instrument Data.</p><p>This exception had not surfaced in previous traces based on ONLY Auto-Instrumentation because the method where it was thrown was NOT covered with Auto-Instrumentation.</p><p>Once we completed the Manual Instrumentation via the Otel Annotator, this method was instrumented and we can now see we had a buried Exception being thrown.</p><h2 id=lets-play-developer-once-again-and-fix-our-issue>Let&rsquo;s play Developer once again and fix our issue</h2><p>We already know exactly what file to look in and what method to look at as it is called out in the trace.</p><p><a href=#image-8f3019a3a48f38853a44a6c65102479f class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204349038-3b43a5ba-18e3-4d58-8985-29ee1f7da40a.png alt="Screen Shot 2022-11-28 at 7 43 58 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-8f3019a3a48f38853a44a6c65102479f><img src=https://user-images.githubusercontent.com/32849847/204349038-3b43a5ba-18e3-4d58-8985-29ee1f7da40a.png alt="Screen Shot 2022-11-28 at 7 43 58 AM" class=lightbox-image loading=lazy></a></p><p>Edit the file</p><p>Using nano</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano shop/src/main/java/com/shabushabu/javashop/shop/model/Instrument.java
</span></span></code></pre></div><p>Search in Nano
CTRL-W</p><p>Enter in: buildForLocale</p><p>Look just above the buildForLocale function, notice the Annotation @WithSpan? @WithSpan is an <a href=https://opentelemetry.io/docs/instrumentation/java/automatic/annotations/ target=_blank>OpenTelemetry Annotation</a> for Java that automatically generates a span around the function that follows.</p><p><a href=#image-8f96738e8062599c00970f5efa533c52 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204349143-1e35b6e4-4059-4c56-8718-76c14d41727c.png alt="Screen Shot 2022-11-28 at 7 45 13 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-8f96738e8062599c00970f5efa533c52><img src=https://user-images.githubusercontent.com/32849847/204349143-1e35b6e4-4059-4c56-8718-76c14d41727c.png alt="Screen Shot 2022-11-28 at 7 45 13 AM" class=lightbox-image loading=lazy></a></p><p>Now let&rsquo;s fix this code. We are going to simply comment this out for now and see if it fixes our latency issue.</p><p>Using nano</p><p>Place comments in front of the entire if statement as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(!</span><span style=color:#000>isEnglish</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>title</span><span style=color:#ce5c00;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>throw</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>InvalidLocaleException</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Non English Characters found in Instrument Data&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span> <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span> <span style=color:#000>System</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>println</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Characters OK &#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>To this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//if (!isEnglish(title)) {
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  throw new InvalidLocaleException(&#34;Non English Characters found in Instrument Data&#34;);
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// } else {
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  System.out.println(&#34;Characters OK &#34;);
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//}
</span></span></span></code></pre></div><p>Save Changes in nano</p><p>CTRL-O</p><p>Exit nano</p><p>CTRL-X</p><p>Make sure you saved your changes to shop/src/main/java/com/shabushabu/javashop/shop/model/Instrument.java</p><h2 id=rebuild-and-deploy-application-1>Rebuild and Deploy Application</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./BuildAndDeploy.sh
</span></span></code></pre></div><p>We are waiting a few minutes&mldr;</p><p>Return to the service map</p><p>If you do NOT see RED in your service map, you have completed the Latency Repair for the Colorado Location !</p><p>Now let&rsquo;s check for our exception in the traces.</p><ul><li>Click on shop service</li><li>Click Traces ( right side )</li><li>Select &ldquo;Errors Only&rdquo;</li></ul><p>If you do not have red in your service map and you do not see Errors in traces, you have successfully completed our Inventory application review for Sri Lanka and Colorado locations!!</p><h2 id=we-are-nearly-done-one-more-location-to-go-chicago>We are nearly done, one more location to go&mldr; Chicago</h2><p>Last but not least, let&rsquo;s ensure Chicago was on-boarded correctly. However, since we have been having so many issues related to &ldquo;location&rdquo; and we have added that custom attribute via Opentelemetry Manual Instrumentation, let&rsquo;s go to the Splunk Observability UI and look at an APM metric set around that tag that I created for us.</p><p><a href=#image-8358a7b587a6f939efd6c4cc7f9ac0ff class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/213540265-5b0567ab-c9f3-412f-bec0-07277c7e8650.png alt=image style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-8358a7b587a6f939efd6c4cc7f9ac0ff><img src=https://user-images.githubusercontent.com/32849847/213540265-5b0567ab-c9f3-412f-bec0-07277c7e8650.png alt=image class=lightbox-image loading=lazy></a></p><p>Open a browser and navigate to <a href=http://localhost:8010 target=_blank>http://localhost:8010</a></p><p>Select a few locations and hit the login button, remember to select the Chicago Location and Login</p><p><a href=#image-73de5171449c92734ae2b5a2e73dcc15 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/213541843-30266285-787f-493b-bc90-ffb4ac6e4c77.png alt=image style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-73de5171449c92734ae2b5a2e73dcc15><img src=https://user-images.githubusercontent.com/32849847/213541843-30266285-787f-493b-bc90-ffb4ac6e4c77.png alt=image class=lightbox-image loading=lazy></a></p><p>Uhh ohh ! We received a 500 error, something is wrong there as well.</p><p><a href=#image-e660218f9dd05750c3546695195cf13b class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204349595-fca270ad-379e-48c5-b2e1-7f222af82c55.png alt="Screen Shot 2022-11-28 at 8 11 47 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-e660218f9dd05750c3546695195cf13b><img src=https://user-images.githubusercontent.com/32849847/204349595-fca270ad-379e-48c5-b2e1-7f222af82c55.png alt="Screen Shot 2022-11-28 at 8 11 47 AM" class=lightbox-image loading=lazy></a></p><p>Return to the Splunk Observability UI and lets look once again at our Service Map, select the Instruments Service and click the breakdowns on the right and select &ldquo;location&rdquo;</p><p><a href=#image-0303eda144d8635c3ca1faa003dcb393 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/214941419-2eaae297-e246-460b-a913-28c2a28fcd6a.png alt=image style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-0303eda144d8635c3ca1faa003dcb393><img src=https://user-images.githubusercontent.com/32849847/214941419-2eaae297-e246-460b-a913-28c2a28fcd6a.png alt=image class=lightbox-image loading=lazy></a></p><p>We see there was an un-handled exception thrown in Instruments service and some latency from our database that is related to the Chicago location !</p><ul><li>Click on Traces on the right</li><li>Select &ldquo;Errors Only&rdquo;</li></ul><p><a href=#image-257d3fbf3102cba17448d2d1a416dbad class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204349696-dc19d62f-ed82-4533-ad27-138237821b8e.png alt="Screen Shot 2022-11-28 at 8 14 50 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-257d3fbf3102cba17448d2d1a416dbad><img src=https://user-images.githubusercontent.com/32849847/204349696-dc19d62f-ed82-4533-ad27-138237821b8e.png alt="Screen Shot 2022-11-28 at 8 14 50 AM" class=lightbox-image loading=lazy></a></p><p>We can see the exception was thrown by Hibernate, however it was thrown in our method &ldquo;instruments: InstrumentRepository.findInstruments&rdquo;</p><p><a href=#image-246addffcad366f5b46a81467ace24b0 class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204351905-03fe632b-b21c-4e8d-8044-dc582fed2253.png alt="Screen Shot 2022-11-28 at 8 14 37 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-246addffcad366f5b46a81467ace24b0><img src=https://user-images.githubusercontent.com/32849847/204351905-03fe632b-b21c-4e8d-8044-dc582fed2253.png alt="Screen Shot 2022-11-28 at 8 14 37 AM" class=lightbox-image loading=lazy></a></p><h2 id=lets-play-developer-again>Let&rsquo;s play developer again</h2><p>Edit the file &ldquo;instruments: InstrumentRepository.findInstruments&rdquo;</p><p>Using nano</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano instruments/src/main/java/com/shabushabu/javashop/instruments/repositories/FindInstrumentRepositoryImpl.java
</span></span></code></pre></div><p><a href=#image-f262f3f9199d5994787c8f3ac197fb0b class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204349802-06135d9d-d70b-4cf1-aaea-3ba737e5c2b9.png alt="Screen Shot 2022-11-28 at 8 20 24 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f262f3f9199d5994787c8f3ac197fb0b><img src=https://user-images.githubusercontent.com/32849847/204349802-06135d9d-d70b-4cf1-aaea-3ba737e5c2b9.png alt="Screen Shot 2022-11-28 at 8 20 24 AM" class=lightbox-image loading=lazy></a></p><p>We can see the developer accidently added the Instruments database with the Chicago Instruments database !</p><p>Let&rsquo;s change the query and fix this, remove &ldquo;instruments_for_sale&rdquo; from our Query</p><p>Change this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Object</span> <span style=color:#000>findInstruments</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#000>LOGGER</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>info</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;findInstruments Called (All)&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#000>Object</span> <span style=color:#000>obj</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>createNativeQuery</span><span style=color:#ce5c00;font-weight:700>(</span> <span style=color:#4e9a06>&#34;SELECT * FROM instruments_for_sale, instruments_for_sale_chicago&#34;</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>getResultList</span><span style=color:#ce5c00;font-weight:700>();</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>obj</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>To this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// public Object findInstruments() {
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//   LOGGER.info(&#34;findInstruments Called (All)&#34;);
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//   Object obj = entityManager.createNativeQuery( &#34;SELECT * FROM instruments_for_sale_chicago&#34;).getResultList(); 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//  return obj;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//}
</span></span></span></code></pre></div><p>Save Changes in nano</p><p>CTRL-O</p><p>Exit nano</p><p>CTRL-X</p><h3 id=build-and-deploy-application-1>Build and Deploy Application</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> javashop-otel directory
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./BuildAndDeploy.sh
</span></span></code></pre></div><p>Now let&rsquo;s test the Chicago location once again</p><ul><li>Open a browser and navigate to <a href=http://localhost:8010 target=_blank>http://localhost:8010</a></li><li>Select the Chicago Location and Login</li></ul><p>We now see the 500 error is gone! Let&rsquo;s confirm a clean Service Map</p><p><a href=#image-9435b91e9e441a8a82ce27c323f7e92b class=lightbox-link><img src=https://user-images.githubusercontent.com/32849847/204350088-fca43e3c-42ea-4933-8a61-01eb2083fd23.png alt="Screen Shot 2022-11-28 at 8 35 11 AM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-9435b91e9e441a8a82ce27c323f7e92b><img src=https://user-images.githubusercontent.com/32849847/204350088-fca43e3c-42ea-4933-8a61-01eb2083fd23.png alt="Screen Shot 2022-11-28 at 8 35 11 AM" class=lightbox-image loading=lazy></a></p><p>If you see a clean service map, free of errors and Latency you have successfully completed the Java Instrumentation Workshop!</p><p><strong>Have a lovely day.</strong></p><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks"><div id=header-wrapper class=default-animation><div id=header class=default-animation><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 -10 107 42.8" style="enable-background:new 0 -10 107 42.8"><style>.st0{fill:#fff}</style><title>splunk-logo</title><path class="st0" d="M11.5 19.8c0 .7-.1 1.4-.4 2s-.7 1.1-1.3 1.5c-.6.4-1.2.8-1.9 1-.8.2-1.6.4-2.4.4-1 0-1.9-.1-2.8-.4-.9-.3-1.8-.8-2.5-1.5l1.4-2.3c.6.5 1.2.9 1.8 1.2C3.8 22 4.4 22.2 5 22.1c.6.0 1.2-.2 1.7-.5.4-.4.7-.9.6-1.4.0-.2.0-.5-.1-.7-.1-.3-.2-.5-.4-.7-.3-.3-.6-.5-.9-.8-.4-.3-.8-.6-1.4-1-.4-.3-.9-.7-1.3-1s-.8-.6-1.1-1c-.3-.4-.6-.8-.8-1.2-.2-.5-.3-1-.3-1.6s.1-1.3.4-1.8c.3-.5.7-1 1.2-1.4s1.1-.7 1.7-.9C5 7.9 5.8 7.8 6.5 7.8c.8.0 1.7.1 2.5.3.8.2 1.5.6 2.2 1l-1.3 2c-.8-.6-1.7-.9-2.7-.9-.5.0-1 .1-1.4.4-.4.3-.6.7-.6 1.1s.2.9.5 1.2c.5.5 1.1 1 1.7 1.4.8.6 1.5 1.1 2 1.6.5.4.9.8 1.3 1.3.3.4.5.8.6 1.2C11.5 18.9 11.6 19.4 11.5 19.8"/><path class="st0" d="M25.8 16c.1-1.5-.3-2.9-1.1-4.2-.6-1-1.7-1.6-2.9-1.5-1.2.0-2.4.6-3.1 1.6-.8 1.3-1.2 2.9-1.1 4.4-.1 1.5.3 3 1.1 4.3.7 1 1.8 1.6 3.1 1.5.7.0 1.4-.2 1.9-.6.5-.4.9-.9 1.2-1.5s.5-1.3.7-2C25.7 17.3 25.8 16.7 25.8 16M30.3 15.8c0 1.2-.2 2.4-.6 3.5-.4 1-.9 2-1.6 2.8-1.4 1.6-3.4 2.5-5.5 2.5-.5.0-.9.0-1.4-.1-.4-.1-.8-.2-1.2-.4s-.8-.5-1.1-.8c-.4-.4-.8-.8-1.2-1.2v10.2h-4.2V8.1h4.2v2.3c.7-.9 1.5-1.6 2.5-2.1s2-.7 3.1-.7c1 0 2 .2 2.9.6s1.6.9 2.3 1.6 1.2 1.6 1.5 2.6C30.1 13.6 30.3 14.7 30.3 15.8"/><rect x="32.2" y=".6" class="st0" width="4.2" height="23.7"/><path class="st0" d="M50.3 24.3v-2.2c-.7.8-1.6 1.5-2.5 2-.9.4-2 .6-3 .6-1.1.0-2.2-.2-3.2-.8-.9-.5-1.5-1.3-1.9-2.2-.1-.2-.2-.5-.2-.7-.1-.3-.1-.6-.2-.9.0-.4-.1-.8-.1-1.1.0-.4.0-1 0-1.6V8.1h4.2v9.2c0 .6.0 1.3.1 1.9.1.4.2.8.4 1.2.5.9 1.6 1.5 2.6 1.4 1.4.1 2.8-.7 3.3-2 .2-.4.3-.8.3-1.1.1-.6.1-1.2.1-1.8V8.1h4.2v16.2H50.3z"/><path class="st0" d="M68.7 24.3V15c0-.6.0-1.3-.1-1.9-.1-.4-.2-.8-.4-1.2-.5-.9-1.6-1.5-2.6-1.4-.7.0-1.4.2-2.1.5-.6.3-1 .9-1.3 1.5-.2.4-.3.8-.3 1.2-.1.6-.1 1.2-.1 1.8v8.7h-4.3V8.1h4.3v2.2c.7-.8 1.6-1.5 2.5-2 .9-.4 2-.6 3-.6 1.1.0 2.2.2 3.2.8.9.5 1.5 1.3 1.9 2.2.1.2.2.5.2.7.1.3.1.6.2.9.0.4.1.8.1 1.1.0.4.0 1 0 1.6v9.2L68.7 24.3z"/><polygon class="st0" points="86.6,24.6 80.2,15.7 80.2,24.3 75.9,24.3 75.9,0.6 80.2,0.6 80.2,14.5 80.6,14.5 86.3,7.9 89.5,9.3 84.1,15.1 90.5,23.2"/><polygon class="st0" points="94.2,23.8 94.2,21 104.2,16.1 94.2,11.2 94.2,8.3 107.1,14.8 107.1,17.4"/><path class="st0" d="M95.5 4.1c.8.0 1.4.7 1.4 1.5S96.2 7 95.4 7C94.6 7 94 6.4 94 5.6 94 4.8 94.6 4.1 95.5 4.1 95.4 4.1 95.4 4.1 95.5 4.1zm0 .2c-.7.0-1.2.6-1.2 1.2.0.6.5 1.2 1.2 1.2.6.0 1.2-.5 1.2-1.2C96.7 4.9 96.1 4.4 95.5 4.3zM95.2 6.4h-.3V4.8c.2.0.3.0.5.0s.3.0.5.1C96 5 96.1 5.1 96 5.2c0 .2-.1.4-.3.4C95.9 5.6 96 5.8 96 6c0 .1.0.3.1.4h-.3c-.1-.1-.1-.3-.1-.4.0-.2-.1-.3-.3-.3h-.2v.7zm0-.9h.2c.2.0.4-.1.4-.3S95.7 5 95.4 5h-.2v.5z"/></svg></div><form action=../../../search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["ja","en"]</script><script src=../../../js/auto-complete.js?1676653287 defer></script>
<script src=../../../js/lunr/lunr.min.js?1676653287 defer></script>
<script src=../../../js/lunr/lunr.stemmer.support.min.js?1676653287 defer></script>
<script src=../../../js/lunr/lunr.multi.min.js?1676653287 defer></script>
<script src=../../../js/lunr/tinyseg.js?1676653287 defer></script>
<script src=../../../js/lunr/lunr.ja.min.js?1676653287 defer></script>
<script src=../../../js/lunr/lunr.en.min.js?1676653287 defer></script>
<script src=../../../js/search.js?1676653287 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=../../../index.html><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics collapsible-menu"><li data-nav-id=/imt/index.html class=dd-item><input type=checkbox id=section-cacc3102db66b140458a5b2dc8fd1e84 aria-controls=subsections-cacc3102db66b140458a5b2dc8fd1e84 class=toggle><label class="a11y-only toggle" for=section-cacc3102db66b140458a5b2dc8fd1e84>Submenu Splunk IM</label><a href=../../../imt/index.html>Splunk IM<i class="fas fa-check read-icon"></i></a><ul id=subsections-cacc3102db66b140458a5b2dc8fd1e84><li data-nav-id=/imt/initial-setup/index.html class=dd-item><a href=../../../imt/initial-setup/index.html>1. Access AWS/EC2 Instance<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/gdi/index.html class=dd-item><input type=checkbox id=section-e4b0906e412a1fefd38641cb47895e54 aria-controls=subsections-e4b0906e412a1fefd38641cb47895e54 class=toggle><label class="a11y-only toggle" for=section-e4b0906e412a1fefd38641cb47895e54>Submenu 2. Get Data In</label><a href=../../../imt/gdi/index.html>2. Get Data In<i class="fas fa-check read-icon"></i></a><ul id=subsections-e4b0906e412a1fefd38641cb47895e54><li data-nav-id=/imt/gdi/nginx/index.html class=dd-item><a href=../../../imt/gdi/nginx/index.html>2.1 Deploy and Monitor NGINX<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/imt/dashboards/index.html class=dd-item><input type=checkbox id=section-61aca98458d9474a5c1deef21a09316a aria-controls=subsections-61aca98458d9474a5c1deef21a09316a class=toggle><label class="a11y-only toggle" for=section-61aca98458d9474a5c1deef21a09316a>Submenu 3. Dashboards</label><a href=../../../imt/dashboards/index.html>3. Dashboards<i class="fas fa-check read-icon"></i></a><ul id=subsections-61aca98458d9474a5c1deef21a09316a><li data-nav-id=/imt/dashboards/editing/index.html class=dd-item><a href=../../../imt/dashboards/editing/index.html>3.1 Editing charts<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/dashboards/savingcharts/index.html class=dd-item><a href=../../../imt/dashboards/savingcharts/index.html>3.2 Saving charts<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/dashboards/filtering/index.html class=dd-item><a href=../../../imt/dashboards/filtering/index.html>3.3 Using Filters & Formulas<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/dashboards/signalflow/index.html class=dd-item><a href=../../../imt/dashboards/signalflow/index.html>3.4 SignalFlow<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/dashboards/adding-charts/index.html class=dd-item><a href=../../../imt/dashboards/adding-charts/index.html>3.5 Adding more charts<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/dashboards/notes-and-layout/index.html class=dd-item><a href=../../../imt/dashboards/notes-and-layout/index.html>3.6 Notes and layout<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/imt/detectors/index.html class=dd-item><input type=checkbox id=section-88264d1f5623c424f98d3947a90d4c1e aria-controls=subsections-88264d1f5623c424f98d3947a90d4c1e class=toggle><label class="a11y-only toggle" for=section-88264d1f5623c424f98d3947a90d4c1e>Submenu 4. Detectors</label><a href=../../../imt/detectors/index.html>4. Detectors<i class="fas fa-check read-icon"></i></a><ul id=subsections-88264d1f5623c424f98d3947a90d4c1e><li data-nav-id=/imt/detectors/muting/index.html class=dd-item><a href=../../../imt/detectors/muting/index.html>4.1 Creating a Muting Rule<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/imt/monitoring-as-code/index.html class=dd-item><a href=../../../imt/monitoring-as-code/index.html>5. Monitoring as Code<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/servicebureau/index.html class=dd-item><input type=checkbox id=section-9bd7ac9c63c703f2e5cd0e92b93ef044 aria-controls=subsections-9bd7ac9c63c703f2e5cd0e92b93ef044 class=toggle><label class="a11y-only toggle" for=section-9bd7ac9c63c703f2e5cd0e92b93ef044>Submenu 6. Service Bureau</label><a href=../../../imt/servicebureau/index.html>6. Service Bureau<i class="fas fa-check read-icon"></i></a><ul id=subsections-9bd7ac9c63c703f2e5cd0e92b93ef044><li data-nav-id=/imt/servicebureau/teams/index.html class=dd-item><a href=../../../imt/servicebureau/teams/index.html>6.1 Teams<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/imt/servicebureau/tokens/index.html class=dd-item><a href=../../../imt/servicebureau/tokens/index.html>6.2 Control Usage<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/apm/index.html class=dd-item><input type=checkbox id=section-f08d4e4d9891c94f3d520f2f51a031c2 aria-controls=subsections-f08d4e4d9891c94f3d520f2f51a031c2 class=toggle><label class="a11y-only toggle" for=section-f08d4e4d9891c94f3d520f2f51a031c2>Submenu Splunk APM</label><a href=../../../apm/index.html>Splunk APM<i class="fas fa-check read-icon"></i></a><ul id=subsections-f08d4e4d9891c94f3d520f2f51a031c2><li data-nav-id=/apm/online-boutique/index.html class=dd-item><input type=checkbox id=section-4ca7ef32ec7d1d69bf8324606de57871 aria-controls=subsections-4ca7ef32ec7d1d69bf8324606de57871 class=toggle><label class="a11y-only toggle" for=section-4ca7ef32ec7d1d69bf8324606de57871>Submenu 1. Deploy the Online Boutique</label><a href=../../../apm/online-boutique/index.html>1. Deploy the Online Boutique<i class="fas fa-check read-icon"></i></a><ul id=subsections-4ca7ef32ec7d1d69bf8324606de57871><li data-nav-id=/apm/online-boutique/locust/index.html class=dd-item><a href=../../../apm/online-boutique/locust/index.html>1.1 Generate load using Locust<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/apm/using-splunk-apm/index.html class=dd-item><input type=checkbox id=section-4d3f52d94118ff1499ff5d1c32c4f7a6 aria-controls=subsections-4d3f52d94118ff1499ff5d1c32c4f7a6 class=toggle><label class="a11y-only toggle" for=section-4d3f52d94118ff1499ff5d1c32c4f7a6>Submenu 2. Using Splunk APM</label><a href=../../../apm/using-splunk-apm/index.html>2. Using Splunk APM<i class="fas fa-check read-icon"></i></a><ul id=subsections-4d3f52d94118ff1499ff5d1c32c4f7a6><li data-nav-id=/apm/using-splunk-apm/service_map/index.html class=dd-item><a href=../../../apm/using-splunk-apm/service_map/index.html>2.1 Service Map<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/apm/using-splunk-apm/tag_spotlight/index.html class=dd-item><a href=../../../apm/using-splunk-apm/tag_spotlight/index.html>2.2 Tag Spotlight<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/apm/using-splunk-apm/example_trace/index.html class=dd-item><a href=../../../apm/using-splunk-apm/example_trace/index.html>2.3 Example trace<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/rum/index.html class=dd-item><input type=checkbox id=section-2d4a228468ffe7961a407622de348030 aria-controls=subsections-2d4a228468ffe7961a407622de348030 class=toggle><label class="a11y-only toggle" for=section-2d4a228468ffe7961a407622de348030>Submenu Splunk RUM</label><a href=../../../rum/index.html>Splunk RUM<i class="fas fa-check read-icon"></i></a><ul id=subsections-2d4a228468ffe7961a407622de348030><li data-nav-id=/rum/1-overview/index.html class=dd-item><a href=../../../rum/1-overview/index.html>1. Overview<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/2-showcase/index.html class=dd-item><a href=../../../rum/2-showcase/index.html>2. Showcase<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/3-setup/index.html class=dd-item><a href=../../../rum/3-setup/index.html>3. Using RUM on your Website<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/4-rum-landing/index.html class=dd-item><a href=../../../rum/4-rum-landing/index.html>4. RUM Landing Page<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/5-browser-app-summary/index.html class=dd-item><a href=../../../rum/5-browser-app-summary/index.html>5. Browser Application Summary<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/6-analyzing-metrics/index.html class=dd-item><a href=../../../rum/6-analyzing-metrics/index.html>6. Analyzing RUM Metrics<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/7-tag-spotlight/index.html class=dd-item><a href=../../../rum/7-tag-spotlight/index.html>7. Using Tag Spotlight<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/8-rum-sessions/index.html class=dd-item><a href=../../../rum/8-rum-sessions/index.html>8. Analyzing RUM Sessions<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/9-apm-correlation/index.html class=dd-item><a href=../../../rum/9-apm-correlation/index.html>9. APM & RUM Correlation<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/10-alerting/index.html class=dd-item><a href=../../../rum/10-alerting/index.html>10. Alerts<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/rum/11-mobile-app-summary/index.html class=dd-item><a href=../../../rum/11-mobile-app-summary/index.html>11. Mobile Applications<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/synthetics/index.html class=dd-item><input type=checkbox id=section-197f0de93637f50d082c5ec6ab8b667b aria-controls=subsections-197f0de93637f50d082c5ec6ab8b667b class=toggle><label class="a11y-only toggle" for=section-197f0de93637f50d082c5ec6ab8b667b>Submenu Splunk Synthetics</label><a href=../../../synthetics/index.html>Splunk Synthetics<i class="fas fa-check read-icon"></i></a><ul id=subsections-197f0de93637f50d082c5ec6ab8b667b><li data-nav-id=/synthetics/real-browser-checks/index.html class=dd-item><a href=../../../synthetics/real-browser-checks/index.html>1. Real Browser Checks<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/synthetics/api-checks/index.html class=dd-item><a href=../../../synthetics/api-checks/index.html>2. API Checks<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/oncall/index.html class=dd-item><input type=checkbox id=section-f27c2accba03cd0a63aaf5f22f666205 aria-controls=subsections-f27c2accba03cd0a63aaf5f22f666205 class=toggle><label class="a11y-only toggle" for=section-f27c2accba03cd0a63aaf5f22f666205>Submenu Splunk OnCall</label><a href=../../../oncall/index.html>Splunk OnCall<i class="fas fa-check read-icon"></i></a><ul id=subsections-f27c2accba03cd0a63aaf5f22f666205><li data-nav-id=/oncall/getting_started/index.html class=dd-item><input type=checkbox id=section-e6dbeb1824f74c454676b919636c1c8f aria-controls=subsections-e6dbeb1824f74c454676b919636c1c8f class=toggle><label class="a11y-only toggle" for=section-e6dbeb1824f74c454676b919636c1c8f>Submenu 1. Getting Started</label><a href=../../../oncall/getting_started/index.html>1. Getting Started<i class="fas fa-check read-icon"></i></a><ul id=subsections-e6dbeb1824f74c454676b919636c1c8f><li data-nav-id=/oncall/getting_started/team/index.html class=dd-item><a href=../../../oncall/getting_started/team/index.html>1.1 Teams<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/oncall/getting_started/rotations/index.html class=dd-item><a href=../../../oncall/getting_started/rotations/index.html>1.2 Rotations<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/oncall/getting_started/escalation/index.html class=dd-item><a href=../../../oncall/getting_started/escalation/index.html>1.3 Escalation Policies<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/oncall/getting_started/routing/index.html class=dd-item><a href=../../../oncall/getting_started/routing/index.html>1.4 Routing Keys<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/oncall/incident_lifecycle/index.html class=dd-item><input type=checkbox id=section-08a295e8c40955314a135c57f14667cc aria-controls=subsections-08a295e8c40955314a135c57f14667cc class=toggle><label class="a11y-only toggle" for=section-08a295e8c40955314a135c57f14667cc>Submenu 2. Incident Lifecycle</label><a href=../../../oncall/incident_lifecycle/index.html>2. Incident Lifecycle<i class="fas fa-check read-icon"></i></a><ul id=subsections-08a295e8c40955314a135c57f14667cc><li data-nav-id=/oncall/incident_lifecycle/create_incidents/index.html class=dd-item><a href=../../../oncall/incident_lifecycle/create_incidents/index.html>2.1 Create Incidents<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/oncall/incident_lifecycle/manage_incidents/index.html class=dd-item><a href=../../../oncall/incident_lifecycle/manage_incidents/index.html>2.2 Manage Incidents<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/tko/index.html class="dd-item parent"><input type=checkbox id=section-db85eaf49422470e545b05eedd2e0120 aria-controls=subsections-db85eaf49422470e545b05eedd2e0120 class=toggle checked><label class="a11y-only toggle" for=section-db85eaf49422470e545b05eedd2e0120>Submenu TKO Workshops</label><a href=../../../tko/index.html>TKO Workshops<i class="fas fa-check read-icon"></i></a><ul id=subsections-db85eaf49422470e545b05eedd2e0120><li data-nav-id=/tko/session-2/index.html class=dd-item><input type=checkbox id=section-78afcc6eae778ecf7847bcd64fdb0089 aria-controls=subsections-78afcc6eae778ecf7847bcd64fdb0089 class=toggle><label class="a11y-only toggle" for=section-78afcc6eae778ecf7847bcd64fdb0089>Submenu Session 2</label><a href=../../../tko/session-2/index.html>Session 2<i class="fas fa-check read-icon"></i></a><ul id=subsections-78afcc6eae778ecf7847bcd64fdb0089><li data-nav-id=/tko/session-2/getting_started/index.html class=dd-item><a href=../../../tko/session-2/getting_started/index.html>Getting started<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-2/deploy/index.html class=dd-item><a href=../../../tko/session-2/deploy/index.html>Deployment<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-2/code_to_python/index.html class=dd-item><a href=../../../tko/session-2/code_to_python/index.html>Code to Kubernetes<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-2/instrument/index.html class=dd-item><a href=../../../tko/session-2/instrument/index.html>Instrumentation<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-2/forwarder/index.html class=dd-item><a href=../../../tko/session-2/forwarder/index.html>UF Deployment<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/tko/session-5/index.html class=dd-item><input type=checkbox id=section-3e61847691a4347245cab38cf2d54c73 aria-controls=subsections-3e61847691a4347245cab38cf2d54c73 class=toggle><label class="a11y-only toggle" for=section-3e61847691a4347245cab38cf2d54c73>Submenu Session 5</label><a href=../../../tko/session-5/index.html>Session 5<i class="fas fa-check read-icon"></i></a><ul id=subsections-3e61847691a4347245cab38cf2d54c73><li data-nav-id=/tko/session-5/deploy-otel/index.html class=dd-item><a href=../../../tko/session-5/deploy-otel/index.html>1. Deploy the OTel Collector<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-5/check-new-navigator-short/index.html class=dd-item><a href=../../../tko/session-5/check-new-navigator-short/index.html>2. Kubernetes Navigator v2<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-5/deploy-apache/index.html class=dd-item><a href=../../../tko/session-5/deploy-apache/index.html>3. Deploying PHP/Apache<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-5/fix-apache/index.html class=dd-item><a href=../../../tko/session-5/fix-apache/index.html>4. Fix PHP/Apache Issue<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-5/deploy-loadgen/index.html class=dd-item><a href=../../../tko/session-5/deploy-loadgen/index.html>5. Deploy Load Generator<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-5/setup-hpa/index.html class=dd-item><a href=../../../tko/session-5/setup-hpa/index.html>6. Setup HPA<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/tko/session-6/index.html class="dd-item parent"><input type=checkbox id=section-2eb90612077cbb385496f5a561e70a70 aria-controls=subsections-2eb90612077cbb385496f5a561e70a70 class=toggle checked><label class="a11y-only toggle" for=section-2eb90612077cbb385496f5a561e70a70>Submenu Session 6</label><a href=../../../tko/session-6/index.html>Session 6<i class="fas fa-check read-icon"></i></a><ul id=subsections-2eb90612077cbb385496f5a561e70a70><li data-nav-id=/tko/session-6/lab1/index.html class="dd-item active"><a href=../../../tko/session-6/lab1/index.html>Module 1<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/tko/session-6/lab2/index.html class=dd-item><a href=../../../tko/session-6/lab2/index.html>Module 2<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/other/index.html class=dd-item><input type=checkbox id=section-94cf2303bb7e3418ce54e9f29b391e36 aria-controls=subsections-94cf2303bb7e3418ce54e9f29b391e36 class=toggle><label class="a11y-only toggle" for=section-94cf2303bb7e3418ce54e9f29b391e36>Submenu Other Workshops</label><a href=../../../other/index.html>Other Workshops<i class="fas fa-check read-icon"></i></a><ul id=subsections-94cf2303bb7e3418ce54e9f29b391e36><li data-nav-id=/other/pet-clinic/index.html class=dd-item><input type=checkbox id=section-7634e8be4fd16e127e84aa15b6d16a79 aria-controls=subsections-7634e8be4fd16e127e84aa15b6d16a79 class=toggle><label class="a11y-only toggle" for=section-7634e8be4fd16e127e84aa15b6d16a79>Submenu PetClinic Java Workshop</label><a href=../../../other/pet-clinic/index.html>PetClinic Java Workshop<i class="fas fa-check read-icon"></i></a><ul id=subsections-7634e8be4fd16e127e84aa15b6d16a79><li data-nav-id=/other/pet-clinic/docs/imt/index.html class=dd-item><a href=../../../other/pet-clinic/docs/imt/index.html>1. OpenTelemetry Collector<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/other/pet-clinic/docs/apm/index.html class=dd-item><a href=../../../other/pet-clinic/docs/apm/index.html>2. Zero Configuration<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/other/pet-clinic/docs/rum/index.html class=dd-item><a href=../../../other/pet-clinic/docs/rum/index.html>3. Real User Monitoring<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/other/pet-clinic/docs/logobserver/index.html class=dd-item><a href=../../../other/pet-clinic/docs/logobserver/index.html>4. Log Observer<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title>More</div><ul><li><a class=padding href=https://github.com/splunk/observability-workshop><i class='fab fa-fw fa-github'></i> GitHub Repository</a></li><li><a class=padding href=https://opentelemetry.io><i class="fab fa-fw fa-wpexplorer"></i> OpenTelemetry</a></li><li><a class=padding href=https://twitter.com/splunk><i class="fab fa-fw fa-twitter"></i> Twitter</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showVisitedLinks showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVariantSwitch showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch showVariantSwitch showVisitedLinks"><ul><li id=select-language-container class="footerLangSwitch showLangSwitch"><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"><option lang=en id=en value=/tko/session-6/lab1/index.html selected>English</option></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=splunk-light value=splunk-light selected>Splunk Light</option><option id=splunk-dark value=splunk-dark>Splunk Dark</option><option id=aws value=aws>Aws</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><style>#footer{font-size:13px;height:100px;margin-left:auto;margin-right:auto;padding:2rem 1rem;text-align:center;min-width:230px;max-width:300px}#footer p{margin:0}</style><p><a href=https://splunk.com title=Splunk>&copy; 2023 Splunk Inc. All Rights Reserved</a></p></div></div></aside><script src=../../../js/clipboard.min.js?1676653287 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1676653287 defer></script>
<script src=../../../js/theme.js?1676653287 defer></script></body></html>