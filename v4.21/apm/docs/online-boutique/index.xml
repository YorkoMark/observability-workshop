<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Splunk Observability Cloud Workshops – Online Boutique K8s Workshop</title><link>https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/</link><description>Recent content in Online Boutique K8s Workshop on Splunk Observability Cloud Workshops</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/index.xml" rel="self" type="application/rss+xml"/><item><title>Apm: Deploying the Online Boutique in K3s</title><link>https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/deploy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/deploy/</guid><description>
&lt;ul>
&lt;li>Deploy the Online Boutique application into Kubernetes (K3s)&lt;/li>
&lt;li>Verify the application is running&lt;/li>
&lt;li>Generate some artificial traffic using Locust&lt;/li>
&lt;li>See APM metrics in the UI&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="1-deploy-online-boutique">1. Deploy Online Boutique&lt;/h2>
&lt;p>To deploy the Online Boutique application into K3s apply the deployment:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist">&lt;li class="nav-item">
&lt;a class="nav-link active tab-Deploy-Online-Boutique"
id="tabs-0-0-tab" data-toggle="tab" href="#tabs-0-0" role="tab" onclick="handleClick(&amp;#34;Deploy-Online-Boutique&amp;#34;);"
aria-controls="tabs-0-0" aria-selected="true">
Deploy Online Boutique
&lt;/a>
&lt;/li>&lt;li class="nav-item">
&lt;a class="nav-link tab-Deployment-Output"
id="tabs-0-1-tab" data-toggle="tab" href="#tabs-0-1" role="tab" onclick="handleClick(&amp;#34;Deployment-Output&amp;#34;);"
aria-controls="tabs-0-1" aria-selected="false">
Deployment Output
&lt;/a>
&lt;/li>&lt;/ul>
&lt;div class="tab-content" id="tabs-0-content">&lt;div class="tab-pane fade show active"
id="tabs-0-0" role="tabpanel" aria-labelled-by="tabs-0-0-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> &lt;span style="color:#204a87">cd&lt;/span> ~/workshop
kubectl apply -f apm/microservices-demo/k8s/deployment.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-0-1" role="tabpanel" aria-labelled-by="tabs-0-1-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> deployment.apps/checkoutservice created
service/checkoutservice created
deployment.apps/redis-cart created
service/redis-cart created
deployment.apps/productcatalogservice created
service/productcatalogservice created
deployment.apps/loadgenerator created
service/loadgenerator created
deployment.apps/frontend created
service/frontend created
service/frontend-external created
deployment.apps/paymentservice created
service/paymentservice created
deployment.apps/emailservice created
service/emailservice created
deployment.apps/adservice created
service/adservice created
deployment.apps/cartservice created
service/cartservice created
deployment.apps/recommendationservice created
service/recommendationservice created
deployment.apps/shippingservice created
service/shippingservice created
deployment.apps/currencyservice created
service/currencyservice created
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;p>To ensure the Online Boutique application is running:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-1" role="tablist">&lt;li class="nav-item">
&lt;a class="nav-link active tab-Get-Pods"
id="tabs-1-0-tab" data-toggle="tab" href="#tabs-1-0" role="tab" onclick="handleClick(&amp;#34;Get-Pods&amp;#34;);"
aria-controls="tabs-1-0" aria-selected="true">
Get Pods
&lt;/a>
&lt;/li>&lt;li class="nav-item">
&lt;a class="nav-link tab-Get-Pods-Output"
id="tabs-1-1-tab" data-toggle="tab" href="#tabs-1-1" role="tab" onclick="handleClick(&amp;#34;Get-Pods-Output&amp;#34;);"
aria-controls="tabs-1-1" aria-selected="false">
Get Pods Output
&lt;/a>
&lt;/li>&lt;/ul>
&lt;div class="tab-content" id="tabs-1-content">&lt;div class="tab-pane fade show active"
id="tabs-1-0" role="tabpanel" aria-labelled-by="tabs-1-0-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> kubectl get pods
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-1-1" role="tabpanel" aria-labelled-by="tabs-1-1-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> NAME READY STATUS RESTARTS AGE
splunk-otel-collector-k8s-cluster-receiver-56585564cc-xclzj 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 84s
splunk-otel-collector-agent-hkshj 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 84s
svclb-frontend-external-c74n6 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
currencyservice-747b74467f-xxrl9 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 52s
redis-cart-74594bd569-2jb6c 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 54s
adservice-6fb948b8c6-2xlrc 0/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
recommendationservice-b5df8776c-sbt4h 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
shippingservice-6d6f7b8d87-5lg9g 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
svclb-loadgenerator-jxwct 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
emailservice-9dd74d87c-wjdqr 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
checkoutservice-8bcd56b46-bfj7d 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 54s
productcatalogservice-796cdcc5f5-vhspz 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
paymentservice-6c875bf647-dklzb 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
frontend-b8f747b87-4tkxn 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
cartservice-59d5979db7-bqf64 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span> 53s
loadgenerator-57c8b84966-7nr4f 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">3&lt;/span> 53s
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;div class="alert alert-info" role="alert">
&lt;p class="alert-heading">Info&lt;/p>
&lt;div class="alert-body">
Usually it should only take around 1min 30secs for the pods to transition into a Running state.
&lt;/div>
&lt;/div>
&lt;hr>
&lt;h2 id="3-validate-in-the-ui">3. Validate in the UI&lt;/h2>
&lt;p>From the top left hamburger menu, click &lt;strong>Infrastructure → Kubernetes&lt;/strong>.&lt;/p>
&lt;p>Use the &lt;strong>Cluster&lt;/strong> dropdown so select your cluster, you should see the new pods started and containers deployed.&lt;/p>
&lt;p>When you click on your cluster in the Splunk UI you should have a view that looks like below:&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique-k8s.png" alt="back to Cluster">&lt;/p>
&lt;p>If you select the &lt;strong>WORKLOADS&lt;/strong> tab again you should now see that there are a number of Deployments and ReplicaSets:&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique-workload.png" alt="HOTROD loaded">&lt;/p>
&lt;hr>
&lt;h2 id="4-view-online-boutique">4. View Online Boutique&lt;/h2>
&lt;p>The Online Boutique is viewable on port 81 of the EC2 instance&amp;rsquo;s IP address. The IP address is the one you used to SSH into the instance at the beginning of the workshop.&lt;/p>
&lt;p>Open your web browser and go to &lt;code>http://{==EC2-IP==}:81/&lt;/code> where you will then be able to see the Online Boutique running.&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique.png" alt="Online Boutique">&lt;/p></description></item><item><title>Apm: Generate traffic using Locust</title><link>https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/locust/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://signalfx.github.io/observability-workshop/v4.21/apm/docs/online-boutique/locust/</guid><description>
&lt;h2 id="1-generate-traffic">1. Generate traffic&lt;/h2>
&lt;p>The Online Boutique deployment contains a container running Locust that we can use to generate load traffic against the website to generate metrics, traces and spans.&lt;/p>
&lt;p>Locust is available on port 82 of the EC2 instance&amp;rsquo;s IP address. Open a new tab in your web browser and go to &lt;code>http://{==EC2-IP==}:82/&lt;/code>, you will then be able to see the Locust running.&lt;/p>
&lt;p>&lt;img src="../../../images/locust.png" alt="Locust">&lt;/p>
&lt;p>Set the &lt;strong>Spawn rate&lt;/strong> to be 2 and click &lt;strong>Start Swarming&lt;/strong>, this will start a gentle continous load on the application.&lt;/p>
&lt;p>&lt;img src="../../../images/locust-spawn-rate.png" alt="Spawn Rate">&lt;/p>
&lt;p>&lt;img src="../../../images/locust-statistics.png" alt="Statistics">&lt;/p>
&lt;hr>
&lt;p>Now go to &lt;strong>Dashboards → APM Services → Service&lt;/strong>.&lt;/p>
&lt;p>For this we need to know the name of your application environment. In this workshop all the environments use: &lt;code>{==hostname==}-apm-env&lt;/code>.&lt;/p>
&lt;p>To find the hostname, on the AWS/EC2 instance run the following command:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-0" role="tablist">&lt;li class="nav-item">
&lt;a class="nav-link active tab-Echo-Hostname"
id="tabs-0-0-tab" data-toggle="tab" href="#tabs-0-0" role="tab" onclick="handleClick(&amp;#34;Echo-Hostname&amp;#34;);"
aria-controls="tabs-0-0" aria-selected="true">
Echo Hostname
&lt;/a>
&lt;/li>&lt;li class="nav-item">
&lt;a class="nav-link tab-Output-Example"
id="tabs-0-1-tab" data-toggle="tab" href="#tabs-0-1" role="tab" onclick="handleClick(&amp;#34;Output-Example&amp;#34;);"
aria-controls="tabs-0-1" aria-selected="false">
Output Example
&lt;/a>
&lt;/li>&lt;/ul>
&lt;div class="tab-content" id="tabs-0-content">&lt;div class="tab-pane fade show active"
id="tabs-0-0" role="tabpanel" aria-labelled-by="tabs-0-0-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> &lt;span style="color:#204a87">echo&lt;/span> &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>hostname&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>-apm-env
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;div class="tab-pane fade"
id="tabs-0-1" role="tabpanel" aria-labelled-by="tabs-0-1-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> bdzx-apm-env
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;p>Select your environment you found in the previous step then select the &lt;code>frontend&lt;/code> service and set time to Past 15 minutes.&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique-service-dashboard.png" alt="APM Dashboard">&lt;/p>
&lt;p>With this automatically generated dashboard you can keep an eye out for the health of your service(s) using RED (Rate, Error &amp;amp; Duration) metrics. It provides various performance related charts as well as correlated information on the underlying host and Kubernetes pods (if applicable).&lt;/p>
&lt;p>Take some time to explore the various charts in this dashboard&lt;/p>
&lt;hr>
&lt;h2 id="2-verify-splunk-apm-metrics">2. Verify Splunk APM metrics&lt;/h2>
&lt;p>From the top left hamburger menu, click APM, this will bring you to the APM Overview dashboard:&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique-apm.png" alt="select APM">&lt;/p>
&lt;p>Select the &lt;strong>Explore&lt;/strong> on the right hand side and select your environment you found before and set the time to 15 minutes. This will show you the automatically generated Dependency/Service Map for the Online Boutique application.&lt;/p>
&lt;p>It should look similar to the screenshot below:&lt;/p>
&lt;p>&lt;img src="../../../images/online-boutique-map.png" alt="Online Boutique in APM">&lt;/p>
&lt;p>The legend at the bottom of the page explains the different visualizations in the Dependency/Service Map.&lt;/p>
&lt;p>&lt;img src="../../../images/apm-legend.png" alt="APM Legend">{: : .shadow .zoom}&lt;/p>
&lt;ul>
&lt;li>Service requests, error rate and root error rate.&lt;/li>
&lt;li>Request rate, latency and error rate&lt;/li>
&lt;/ul>
&lt;p>Also in this view you can see the overall Error and Latency rates over time charts.&lt;/p>
&lt;h2 id="3-opentelemetry-dashboard">3. OpenTelemetry Dashboard&lt;/h2>
&lt;p>Once the Open Telemetery Collector is deployed the platform will automatically provide a built in dashboard display OpenTelemetry Collector metrics.&lt;/p>
&lt;p>From the top left hamburger menu, select &lt;strong>Dashboards → OpenTelemetry Collector&lt;/strong>, scroll all the way to the bottom of the page and validate metrics and spans are being sent:&lt;/p>
&lt;p>&lt;img src="../../../images/otel-dashboard.png" alt="OpenTelemetry Collector dashboard">&lt;/p>
&lt;h2 id="4-opentelemetry-zpages">4. OpenTelemetry zpages&lt;/h2>
&lt;p>To debug the traces being sent you can use the zpages extension. &lt;a href="https://github.com/open-telemetry/opentelemetry-specification/blob/main/experimental/trace/zpages.md#tracez" target="_blank">zpages&lt;/a>
are part of the OpenTelemetry collector and provide live data for troubleshooting and statistics. They are available on port &lt;code>55679&lt;/code> of the EC2 instance&amp;rsquo;s IP address. Open a new tab in your web browser and enter in &lt;code>http://{==EC2-IP==}:55679/debug/tracez&lt;/code>, you will then be able to see the zpages output.&lt;/p>
&lt;p>&lt;img src="../../../images/zpages.png" alt="zpages">&lt;/p>
&lt;p>Alternatively, from your shell prompt you can run a text based browser:&lt;/p>
&lt;ul class="nav nav-tabs" id="tabs-1" role="tablist">&lt;li class="nav-item">
&lt;a class="nav-link active tab-Lynx-Command"
id="tabs-1-0-tab" data-toggle="tab" href="#tabs-1-0" role="tab" onclick="handleClick(&amp;#34;Lynx-Command&amp;#34;);"
aria-controls="tabs-1-0" aria-selected="true">
Lynx Command
&lt;/a>
&lt;/li>&lt;/ul>
&lt;div class="tab-content" id="tabs-1-content">&lt;div class="tab-pane fade show active"
id="tabs-1-0" role="tabpanel" aria-labelled-by="tabs-1-0-tab">&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-text" data-lang="text"> lynx http://localhost:55679/debug/tracez
&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div></description></item></channel></rss>