<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Splunk Observability Cloud Workshops – Using Splunk APM</title><link>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/</link><description>Recent content in Using Splunk APM on Splunk Observability Cloud Workshops</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/index.xml" rel="self" type="application/rss+xml"/><item><title>Apm: Service Map</title><link>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/service_map/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/service_map/</guid><description>
&lt;h2 id="service-map">Service Map&lt;/h2>
&lt;p>Click on &lt;strong>paymentservice&lt;/strong> in the service map and select &lt;strong>version&lt;/strong> from the &lt;code>breakdown&lt;/code> drop down filter underneath &lt;strong>paymentservice&lt;/strong>. This will filter our service map by the custom span tag &lt;strong>version&lt;/strong>.&lt;/p>
&lt;p>You will now see the service map has been updated like the below screenshot to show the different versions of the &lt;strong>paymentservice&lt;/strong>.&lt;/p>
&lt;p>&lt;img src="../../../images/paymentservice.png" alt="Payment Service">&lt;/p></description></item><item><title>Apm: Tag Spotlight</title><link>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/tag_spotlight/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/tag_spotlight/</guid><description>
&lt;h2 id="tag-spotlight">Tag Spotlight&lt;/h2>
&lt;p>On the right hand side of the screen scroll down on &lt;strong>Tag Spotlight&lt;/strong>, ensure &lt;strong>Top Across All Indexed Tags&lt;/strong> is selected in the dropdown click the full screen button &lt;img src="../../../images/full_screen.png" alt="full_screen button"> as indicated in the screenshot below.&lt;/p>
&lt;p>&lt;img src="../../../images/tag-spotlight.png" alt="Tag Spotlight">&lt;/p>
&lt;p>The Tag Spotlight Page will be displayed. From this page you can view the top tags in your application and their corresponding error rates and request rates.&lt;/p>
&lt;p>Note that for the &lt;strong>version&lt;/strong> span tag it appears that version &lt;code>350.10&lt;/code> has a 100% error rate and for our &lt;strong>tenant.level&lt;/strong> span tag it shows that all three tenants (Gold, Silver &amp;amp; Bronze) have errors present.&lt;/p>
&lt;p>&lt;img src="../../../images/tag-spotlight-dashboard.png" alt="Tag Spotlight Dashboard">&lt;/p>
&lt;p>The Tag Spotlight page is interactive and allows you to add a tag as a filter by simply clicking on your desired tag. Click on &lt;strong>gold&lt;/strong> under &lt;strong>tenant.level&lt;/strong> to add it as a filter. Once this is done the page will now only display data with &lt;strong>gold&lt;/strong> as it’s &lt;strong>tenant.level&lt;/strong>.&lt;/p>
&lt;p>&lt;img src="../../../images/gold-tenant.png" alt="Gold Tenant">&lt;/p>
&lt;p>Tag Spotlight is very useful for analysing your data and spotting trends. We can see that for the Gold Tenant that out of the total number of requests, 55 of them are in error (this number will vary in your workshop).&lt;/p>
&lt;p>If we correlate this to the version tag, we can see that version &lt;code>350.10&lt;/code> served 55 requests and version &lt;code>350.9&lt;/code> served 17 requests. This means that all of the requests that went through version &lt;code>350.10&lt;/code> ended up in an error state.&lt;/p>
&lt;p>In order to test this theory further that all of the requests from &lt;strong>paymentservice&lt;/strong> version &lt;code>350.10&lt;/code> result in an error, we can change our filter to another tenant by using the tag selector. Change your filter from &lt;strong>gold&lt;/strong> tenant to &lt;strong>silver&lt;/strong> tenant.&lt;/p>
&lt;p>&lt;img src="../../../images/silver-tag-filter.png" alt="Silver Tag Filter">&lt;/p>
&lt;p>Now we can perform a similar analysis by looking at the number of requests in error for the &lt;strong>silver&lt;/strong> tenant and correlating that with the version number. Note the amount of errors for the &lt;strong>silver&lt;/strong> tenant match the amount of requests for version &lt;code>350.10&lt;/code>.&lt;/p>
&lt;p>&lt;img src="../../../images/silver-tenant.png" alt="Silver Tenant">&lt;/p>
&lt;p>Tag Spotlight not only allows you to look at request and error rates but also at the latency per service. In order to do this just select the latency button and remove your Silver Tenant Tag so that you can see the latency for all of the Payment Service.&lt;/p>
&lt;p>&lt;img src="../../../images/latency.png" alt="Latency">&lt;/p>
&lt;p>Go back to your service map by pressing the &lt;strong>X&lt;/strong> button on the far right underneath &lt;strong>Clear All&lt;/strong>.&lt;/p>
&lt;p>Click anywhere on the pink line in the &lt;strong>Services by Error Rate&lt;/strong> graph in the top right hand corner. Once selected you should see a list of example traces. Click on one of the example traces with an initiating operation of &lt;strong>frontend: POST /cart/checkout&lt;/strong>.&lt;/p></description></item><item><title>Apm: Example trace</title><link>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/example_trace/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://splunk.github.io/observability-workshop/v4.43/apm/docs/using-splunk-apm/example_trace/</guid><description>
&lt;h2 id="example-trace">Example Trace&lt;/h2>
&lt;p>&lt;img src="../../../images/example-trace.png" alt="Example Trace">&lt;/p>
&lt;p>You should now see the entire trace along with the spans for the example trace that was selected. Spans which have errors are indicated by a red exclamation mark beside it. If you have a number such as &lt;strong>x6&lt;/strong> in a grey box, click it to expand the compacted &lt;code>paymentservice&lt;/code> spans.&lt;/p>
&lt;p>&lt;img src="../../../images/trace-span.png" alt="Example Trace">&lt;/p>
&lt;p>Now click one of the &lt;code>paymentservice&lt;/code> spans with the red exclamation mark to expand it and see the associated metadata and some error details. Note that we are able to see that this error is caused by a 401 error and other useful information such as ‘tenant’ and ‘version’ is also displayed.&lt;/p>
&lt;p>&lt;img src="../../../images/trace-metadata.png" alt="Traces and Spans">&lt;/p>
&lt;p>So we now know that the error is caused by an &lt;strong>Invalid Request&lt;/strong> but we don&amp;rsquo;t know what exact request. At the bottom of the page you should see a contextual link to Logs, clink on this link to view the logs associated with this span.&lt;/p>
&lt;p>&lt;img src="../../../images/logs_link.png" alt="Logs Link">&lt;/p>
&lt;p>You should now be looking at a &lt;strong>Log Observer&lt;/strong> dashboard simialar to the image below.&lt;/p>
&lt;p>&lt;img src="../../../images/log_observer.png" alt="Log Observer">&lt;/p>
&lt;p>We can use the filter to display only the error logs. Click on &lt;code>ERROR&lt;/code> in the top right hand corner, then &lt;code>Add to filter&lt;/code>&lt;/p>
&lt;p>&lt;img src="../../../images/error_filter.png" alt="Error Filter">&lt;/p>
&lt;p>You should now have a shorter list of log entries which have a &lt;code>severity&lt;/code> of &lt;code>ERROR&lt;/code>&lt;/p>
&lt;p>&lt;img src="../../../images/filtered_results.png" alt="Filtered Results">&lt;/p>
&lt;p>Select any of the entries to view the details. We can now see how the error was caused by the use of an &lt;strong>Invalid API Token&lt;/strong> that our developers have accidentally pushed to production!&lt;/p>
&lt;p>&lt;img src="../../../images/error_details.png" alt="Error Details">&lt;/p>
&lt;p>Congratulations, you have now completed this APM Workshop.&lt;/p></description></item></channel></rss>