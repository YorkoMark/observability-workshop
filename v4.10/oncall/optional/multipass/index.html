<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.92.2">
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=/observability-workshop/v4.10/favicons/favicon.ico>
<link rel=apple-touch-icon href=/observability-workshop/v4.10/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-192x192.png sizes=192x192>
<title>Splunk Observability Cloud Workshops</title>
<meta name=description content="Creating a Test VM Using Multipass
Aim
The aim of this module is to guide you through the process of creating a VM locally using Multipass.
Once the …">
<meta property="og:title" content>
<meta property="og:description" content="Creating a Test VM Using Multipass Aim The aim of this module is to guide you through the process of creating a VM locally using Multipass.
Once the configuration of VictorOps is complete you will use this VM to trigger an Alert from SignalFx which in turn will create an Incident within VictorOps, resulting in you getting paged.
 1. Install Multipass If you do not already have Multipass installed you can download the installer from here .">
<meta property="og:type" content="article">
<meta property="og:url" content="https://signalfx.github.io/observability-workshop/v4.10/oncall/optional/multipass/"><meta property="article:section" content="oncall">
<meta property="article:modified_time" content="2022-03-24T16:07:37+00:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops">
<meta itemprop=name content>
<meta itemprop=description content="Creating a Test VM Using Multipass Aim The aim of this module is to guide you through the process of creating a VM locally using Multipass.
Once the configuration of VictorOps is complete you will use this VM to trigger an Alert from SignalFx which in turn will create an Incident within VictorOps, resulting in you getting paged.
 1. Install Multipass If you do not already have Multipass installed you can download the installer from here .">
<meta itemprop=dateModified content="2022-03-24T16:07:37+00:00">
<meta itemprop=wordCount content="684">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content>
<meta name=twitter:description content="Creating a Test VM Using Multipass Aim The aim of this module is to guide you through the process of creating a VM locally using Multipass.
Once the configuration of VictorOps is complete you will use this VM to trigger an Alert from SignalFx which in turn will create an Incident within VictorOps, resulting in you getting paged.
 1. Install Multipass If you do not already have Multipass installed you can download the installer from here .">
<link rel=preload href=/observability-workshop/v4.10/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css as=style>
<link href=/observability-workshop/v4.10/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1>
<a class=navbar-brand href=/observability-workshop/v4.10/>
<span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
</ul>
</div>
</nav>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/imt/><span>Splunk IMT</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/apm/><span>Splunk APM</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/synthetics/><span>Splunk Synthetics</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/rum/><span>Splunk RUM</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/bootcamp/><span>Observability Bootcamp</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/resources/><span>Resources</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
Releases
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.9>v4.9</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.10>v4.10</a>
</div>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/observability-workshop/v4.10/ja/>日本語</a>
</div>
</li>
</ul>
</div>
</nav>
</header>
<div class="container-fluid td-default td-outer">
<main role=main class=td-main>
<h1 id=creating-a-test-vm-using-multipass>Creating a Test VM Using Multipass</h1>
<h2 id=aim>Aim</h2>
<p>The aim of this module is to guide you through the process of creating a VM locally using Multipass.</p>
<p>Once the configuration of VictorOps is complete you will use this VM to trigger an Alert from SignalFx which in turn will create an Incident within VictorOps, resulting in you getting paged.</p>
<hr>
<h2 id=1-install-multipass>1. Install Multipass</h2>
<p>If you do not already have Multipass installed you can download the installer from <a href=https://multipass.run/ target=_blank>here</a>
.</p>
<p>Users running macOS can install it using <a href=https://brew.sh/ target=_blank>Homebrew</a>
by running:</p>
<p>=== &ldquo;Shell Command&rdquo;</p>
<pre><code>```text
brew cask install multipass
```
</code></pre>
<hr>
<h2 id=2-create-vm-using-multipass>2. Create VM using Multipass</h2>
<h3 id=21-cloud-init>2.1 Cloud-init</h3>
<p>The first step is to pull down the <code>cloud-init</code> file to launch a pre-configured VM.</p>
<p>=== &ldquo;Shell Command&rdquo;</p>
<pre><code>```text
WSVERSION=2.42
curl -s \
https://raw.githubusercontent.com/signalfx/observability-workshop/v$WSVERSION/workshop/cloud-init/victorops.yaml \
-o victorops.yaml
```
</code></pre>
<h3 id=22-launch-vm>2.2 Launch VM</h3>
<p>Remaining in the same directory where you downloaded <code>victorops.yaml</code>, run the following commands to create your VM.</p>
<p>The first command will generate a random unique 4 character string. This will prevent clashes in the Splunk UI.</p>
<p>=== &ldquo;Shell Command&rdquo;</p>
<pre><code>```text
export INSTANCE=$(cat /dev/urandom | base64 | tr -dc 'a-z' | head -c4)
multipass launch \
--name ${INSTANCE} \
--cloud-init victorops.yaml
```
</code></pre>
<p>=== &ldquo;Example Output&rdquo;</p>
<pre><code>```text
Launched: zevn
```
</code></pre>
<p>Make a note of your VMs Hostname as you will need it in later steps.</p>
<h3 id=23-connect-to-vm>2.3 Connect to VM</h3>
<p>Once the VM has deployed successfully, in a <strong>new</strong> shell session connect to the VM using the following command.</p>
<p>=== &ldquo;Shell Command&rdquo;</p>
<pre><code>```text
multipass shell ${INSTANCE}
```
</code></pre>
<p>=== &ldquo;Example Input&rdquo;</p>
<pre><code>```text
multipass shell zevn
```
</code></pre>
<p>=== &ldquo;Example Output&rdquo;</p>
<pre><code>```text
Last login: Tue Jun  9 15:10:19 2020 from 192.168.64.1
ubuntu@zevn:~$
```
</code></pre>
<hr>
<h2 id=3-install-signalfx-agent>3. Install SignalFx Agent</h2>
<p>An easy way to install the SignalFx Agent into your VM is to copy the install commands from the Splunk UI, then run them directly within your VM.</p>
<h3 id=31-splunk-ui>3.1 Splunk UI</h3>
<p>Navigate to the <strong>Integrations</strong> tab within the Splunk UI, where you will find the SignalFx SmartAgent tile on the top row.</p>
<p>Click on the SmartAgent tile to open it&mldr;</p>
<p><img src=..//images/oncall/integrations-tab.png alt=Integrations></p>
<p>&mldr;then select the <strong>Setup</strong> tab&mldr;</p>
<p><img src=..//images/oncall/smartagent-tile.png alt=SmartAgent></p>
<p>&mldr;then scroll down to &lsquo;Step 1&rsquo; where you will find the commands for installing the agent for both Linux and Windows. You need to copy the commands for Linux, so click the top <strong>copy</strong>{: .label-button .sfx-ui-button-blue} button to place these commands on your clipboard ready for the next step.</p>
<p><img src=..//images/oncall/smartagent-install.png alt="SmartAgent Install"></p>
<h3 id=32-install-agent>3.2 Install Agent</h3>
<p>Now paste the linux install commands into your VM Shell, the SignalFx Agent will install and after approx 1 min you should have the following result.</p>
<p>=== &ldquo;Example Output&rdquo;</p>
<pre><code>```text
The SignalFx Agent has been successfully installed.

Make sure that your system's time is relatively accurate or else datapoints may not be accepted.

The agent's main configuration file is located at /etc/signalfx/agent.yaml.
```
</code></pre>
<hr>
<h2 id=4-check-signalfx-agent>4. Check SignalFx Agent</h2>
<h3 id=41-agent-status>4.1 Agent Status</h3>
<p>Once the agent has completed installing run the following command to check the status</p>
<p>=== &ldquo;Shell Command&rdquo;</p>
<pre><code>```text
sudo signalfx-agent status
```
</code></pre>
<p>=== &ldquo;Example Output&rdquo;</p>
<pre><code>```text
SignalFx Agent version:           5.3.0
Agent uptime:                     2m7s
Observers active:                 host
Active Monitors:                  9
Configured Monitors:              9
Discovered Endpoint Count:        6
Bad Monitor Config:               None
Global Dimensions:                {host: zevn}
GlobalSpanTags:                   map[]
Datapoints sent (last minute):    237
Datapoints failed (last minute):  0
Datapoints overwritten (total):   0
Events Sent (last minute):        18
Trace Spans Sent (last minute):   0
Trace Spans overwritten (total):  0

Additional status commands:

signalfx-agent status config - show resolved config in use by agent
signalfx-agent status endpoints - show discovered endpoints
signalfx-agent status monitors - show active monitors
signalfx-agent status all - show everything
```
</code></pre>
<h3 id=42-check-the-splunk-ui>4.2 Check the Splunk UI</h3>
<p>Navigate to the Splunk UI and click on the <strong>Infrastructure</strong> tab. The click on <strong>Hosts (Smart Agent / collectd)</strong> under the <strong>Hosts</strong> section.</p>
<p>Find your VM and confirm it is reporting in correctly; allow a few minutes for it to appear.</p>
<p><img src=..//images/oncall/sfx-infrastructure.png alt=Infrastructure></p>
<p>If it fails to appear after 3 mins, please let the Splunk Team know so they can help troubleshoot.</p>
<hr>
<p>Because you are using a Multipass VM instead of a Splunk Provided EC2 Instance, you will also need to complete the optional module &ldquo;Create a Detector&rdquo;. This will ensure you receive incident notifications for this VM.</p>
</main>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/signalfx/observability-workshop aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 Splunk Inc. All Rights Reserved</small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.10/js/tabpane-persist.js></script>
<script src=/observability-workshop/v4.10/js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
</body>
</html>