<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.92.2">
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=/observability-workshop/v4.10/favicons/favicon.ico>
<link rel=apple-touch-icon href=/observability-workshop/v4.10/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/observability-workshop/v4.10/favicons/android-192x192.png sizes=192x192>
<title>Monitoring as Code | Splunk Observability Cloud Workshops</title>
<meta name=description content="
Use Terraform1 to manage Observability Cloud Dashboards and Detectors
Initialize the Terraform Splunk Provider2.
Run Terraform to create detectors …">
<meta property="og:title" content="Monitoring as Code">
<meta property="og:description" content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards.   1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can monitoring as code to build out your visualisations, what to monitor, and when to alert, among other things.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://signalfx.github.io/observability-workshop/v4.10/imt/docs/monitoring-as-code/terraform/"><meta property="article:section" content="imt">
<meta property="article:modified_time" content="2022-03-10T11:43:13+00:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops">
<meta itemprop=name content="Monitoring as Code">
<meta itemprop=description content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards.   1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can monitoring as code to build out your visualisations, what to monitor, and when to alert, among other things.">
<meta itemprop=dateModified content="2022-03-10T11:43:13+00:00">
<meta itemprop=wordCount content="993">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Monitoring as Code">
<meta name=twitter:description content="Use Terraform1 to manage Observability Cloud Dashboards and Detectors Initialize the Terraform Splunk Provider2. Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider. See how Terraform can also delete detectors and dashboards.   1. Initial setup Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.
You can monitoring as code to build out your visualisations, what to monitor, and when to alert, among other things.">
<link rel=preload href=/observability-workshop/v4.10/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css as=style>
<link href=/observability-workshop/v4.10/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1>
<a class=navbar-brand href=/observability-workshop/v4.10/>
<span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
</ul>
</div>
</nav>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/observability-workshop/v4.10/imt/><span class=active>Splunk IMT</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/apm/><span>Splunk APM</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/synthetics/><span>Splunk Synthetics</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/rum/><span>Splunk RUM</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/bootcamp/><span>Observability Bootcamp</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.10/resources/><span>Resources</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
Releases
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.9>v4.9</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.10>v4.10</a>
</div>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/observability-workshop/v4.10/ja/imt/docs/monitoring-as-code/terraform/>日本語</a>
</div>
</li>
</ul>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/observability-workshop/v4.10/offline-search-index.084fbd8af648da9d0025b96e9f773a42.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<div class="nav-item dropdown d-block d-lg-none">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/observability-workshop/v4.10/ja/imt/docs/monitoring-as-code/terraform/>日本語</a>
</div>
</div>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv410imt-li>
<a href=/observability-workshop/v4.10/imt/ title=Introduction class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-observability-workshopv410imt><span>Splunk IMT</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv410imtdocs-li>
<a href=/observability-workshop/v4.10/imt/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocs><span>Setup and Exercises</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsinitial-setup-li>
<a href=/observability-workshop/v4.10/imt/docs/initial-setup/ title="How to connect to your workshop environment" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsinitial-setup><span>Access AWS/EC2 Instance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv410imtdocsgdi-li>
<a href=/observability-workshop/v4.10/imt/docs/gdi/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocsgdi><span>Get Data In</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsgdik3s-li>
<a href=/observability-workshop/v4.10/imt/docs/gdi/k3s/ title="Deploying the OpenTelemetry Collector in Kubernetes" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsgdik3s><span>Deploy the OTel Collector</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsgdinginx-li>
<a href=/observability-workshop/v4.10/imt/docs/gdi/nginx/ title="Deploying NGINX in K3s" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsgdinginx><span>Deploy and Monitor NGIX</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv410imtdocsdashboards-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/ title="Working with Dashboards" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocsdashboards><span>Dashboards</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardsintro-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/intro/ title="Working with Dashboards, Charts and Metrics" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardsintro><span>Introduction</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardsediting-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/editing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardsediting><span>Editing charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardssavingcharts-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/savingcharts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardssavingcharts><span>Saving charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardsfiltering-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/filtering/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardsfiltering><span>Using Filters & Formulas</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardssignalflow-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/signalflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardssignalflow><span>SignalFlow</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardsadding-charts-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/adding-charts/ title="Adding charts to dashboards" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardsadding-charts><span>Adding more charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdashboardsdashboarding-li>
<a href=/observability-workshop/v4.10/imt/docs/dashboards/dashboarding/ title="Adding Notes and Dashboard Layout" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdashboardsdashboarding><span>Notes and layout</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv410imtdocsdetectors-li>
<a href=/observability-workshop/v4.10/imt/docs/detectors/ title="Working with Detectors" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocsdetectors><span>Detectors</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdetectorscreating-li>
<a href=/observability-workshop/v4.10/imt/docs/detectors/creating/ title="Working with Detectors - Lab Summary" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdetectorscreating><span>Creating a Detector</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsdetectorsmuting-li>
<a href=/observability-workshop/v4.10/imt/docs/detectors/muting/ title="Working with Muting Rules - Lab Summary" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsdetectorsmuting><span>Creating a Muting Rule</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv410imtdocsmonitoring-as-code-li>
<a href=/observability-workshop/v4.10/imt/docs/monitoring-as-code/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocsmonitoring-as-code><span>Monitoring as Code</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-observability-workshopv410imtdocsmonitoring-as-codeterraform-li>
<a href=/observability-workshop/v4.10/imt/docs/monitoring-as-code/terraform/ title="Monitoring as Code" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsmonitoring-as-codeterraform><span class=td-sidebar-nav-active-item>Plan, Apply, Destroy</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv410imtdocsservicebureau-li>
<a href=/observability-workshop/v4.10/imt/docs/servicebureau/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv410imtdocsservicebureau><span>Service Bureau</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsservicebureaubilling-and-usage-li>
<a href=/observability-workshop/v4.10/imt/docs/servicebureau/billing-and-usage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsservicebureaubilling-and-usage><span>Billing and Usage</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsservicebureauteams-li>
<a href=/observability-workshop/v4.10/imt/docs/servicebureau/teams/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsservicebureauteams><span>Teams</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv410imtdocsservicebureautokens-li>
<a href=/observability-workshop/v4.10/imt/docs/servicebureau/tokens/ title="Controlling Usage" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv410imtdocsservicebureautokens><span>Control Usage</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#1-initial-setup>1. Initial setup</a></li>
<li><a href=#2-create-execution-plan>2. Create execution plan</a></li>
<li><a href=#3-apply-execution-plan>3. Apply execution plan</a></li>
<li><a href=#3-destroy-all-your-hard-work>3. Destroy all your hard work</a></li>
</ul>
</nav></div>
<div class="taxonomy taxonomy-terms-cloud taxo-tags">
<h5 class=taxonomy-title>Tag Cloud</h5>
<ul class=taxonomy-terms>
<li><a class=taxonomy-term href=https://signalfx.github.io/observability-workshop/v4.10/tags/k3s/ data-taxonomy-term=k3s><span class=taxonomy-label>k3s</span><span class=taxonomy-count>1</span></a></li>
<li><a class=taxonomy-term href=https://signalfx.github.io/observability-workshop/v4.10/tags/ngnix/ data-taxonomy-term=ngnix><span class=taxonomy-label>NGNIX</span><span class=taxonomy-count>1</span></a></li>
</ul>
</div>
<div class="taxonomy taxonomy-terms-cloud taxo-categories">
<h5 class=taxonomy-title>Categories</h5>
<ul class=taxonomy-terms>
<li><a class=taxonomy-term href=https://signalfx.github.io/observability-workshop/v4.10/categories/imt/ data-taxonomy-term=imt><span class=taxonomy-label>IMT</span><span class=taxonomy-count>2</span></a></li>
</ul>
</div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class=td-breadcrumbs>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.10/imt/>Splunk IMT</a>
</li>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.10/imt/docs/>Setup and Exercises</a>
</li>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.10/imt/docs/monitoring-as-code/>Monitoring as Code</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://signalfx.github.io/observability-workshop/v4.10/imt/docs/monitoring-as-code/terraform/>Plan, Apply, Destroy</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Monitoring as Code</h1>
<header class=article-meta>
<p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>&nbsp; 5 minute read &nbsp;</p>
</header>
<ul>
<li>Use Terraform<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to manage Observability Cloud Dashboards and Detectors</li>
<li>Initialize the Terraform Splunk Provider<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</li>
<li>Run Terraform to create detectors and dashboards from code using the Splunk Terraform Provider.</li>
<li>See how Terraform can also delete detectors and dashboards.</li>
</ul>
<hr>
<h2 id=1-initial-setup>1. Initial setup</h2>
<p>Monitoring as code adopts the same approach as infrastructure as code. You can manage monitoring the same way you do applications, servers, or other infrastructure components.</p>
<p>You can monitoring as code to build out your visualisations, what to monitor, and when to alert, among other things. This means your monitoring setup, processes, and rules can be versioned, shared, and reused.</p>
<p>Full documentation for the Splunk Terraform Provider is available <a href=https://registry.terraform.io/providers/splunk-terraform/signalfx/latest/docs target=_blank>here</a>
. Remaining in your AWS/EC2 instance, change into the <code>signalfx-jumpstart</code> directory</p>
<ul class="nav nav-tabs" id=tabs-0 role=tablist><li class=nav-item>
<a class="nav-link active tab-Change-directory" id=tabs-0-0-tab data-toggle=tab href=#tabs-0-0 role=tab onclick='handleClick("Change-directory")' aria-controls=tabs-0-0 aria-selected=true>
Change directory
</a>
</li></ul>
<div class=tab-content id=tabs-0-content><div class="tab-pane fade show active" id=tabs-0-0 role=tabpanel aria-labelled-by=tabs-0-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>cd</span> ~/signalfx-jumpstart</code></pre></div></div>
</div>
<p>The environment variables needed should already be set from <a href=../../../otel/k3s/#2-installation-using-helm>Installation using Helm</a>
. If not, create the following environment variables to use in the Terraform steps below</p>
<ul class="nav nav-tabs" id=tabs-1 role=tablist><li class=nav-item>
<a class="nav-link active tab-Environment-Variables" id=tabs-1-0-tab data-toggle=tab href=#tabs-1-0 role=tab onclick='handleClick("Environment-Variables")' aria-controls=tabs-1-0 aria-selected=true>
Environment Variables
</a>
</li></ul>
<div class=tab-content id=tabs-1-content><div class="tab-pane fade show active" id=tabs-1-0 role=tabpanel aria-labelled-by=tabs-1-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>export</span> <span style=color:#000>ACCESS_TOKEN</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;replace_with_O11y-Workshop-ACCESS_token&gt;
<span style=color:#204a87>export</span> <span style=color:#000>REALM</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;replace_with_splunk_realm&gt;</code></pre></div></div>
</div>
<p>Initialize Terraform and upgrade to the latest version of the Splunk Terraform Provider</p>
<div class="alert alert-primary" role=alert>
<p class=alert-heading>Note: Upgrading the SignalFx Terraform Provider</p>
<p class=alert-body>
You will need to run the command below each time a new version of the Splunk Terraform Provider is released. You can track the releases on <a href=https://github.com/splunk-terraform/terraform-provider-signalfx/releases target=_blank>GitHub.</a>
</p>
</div>
<ul class="nav nav-tabs" id=tabs-3 role=tablist><li class=nav-item>
<a class="nav-link active tab-Initialise-Terraform" id=tabs-3-0-tab data-toggle=tab href=#tabs-3-0 role=tab onclick='handleClick("Initialise-Terraform")' aria-controls=tabs-3-0 aria-selected=true>
Initialise Terraform
</a>
</li><li class=nav-item>
<a class="nav-link tab-Initialise-Output" id=tabs-3-1-tab data-toggle=tab href=#tabs-3-1 role=tab onclick='handleClick("Initialise-Output")' aria-controls=tabs-3-1 aria-selected=false>
Initialise Output
</a>
</li></ul>
<div class=tab-content id=tabs-3-content><div class="tab-pane fade show active" id=tabs-3-0 role=tabpanel aria-labelled-by=tabs-3-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>terraform init -upgrade</code></pre></div></div>
<div class="tab-pane fade" id=tabs-3-1 role=tabpanel aria-labelled-by=tabs-3-1-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Upgrading modules...
- aws in modules/aws
- azure in modules/azure
- docker in modules/docker
- gcp in modules/gcp
- host in modules/host
- kafka in modules/kafka
- kubernetes in modules/kubernetes
- parent_child_dashboard in modules/dashboards/parent
- pivotal in modules/pivotal
- usage_dashboard in modules/dashboards/usage

Initializing the backend...

Initializing provider plugins...
- Finding latest version of splunk-terraform/signalfx...
- Installing splunk-terraform/signalfx v6.7.10...
- Installed splunk-terraform/signalfx v6.7.10 (signed by a HashiCorp partner, key ID 8B5755E223754FC9)

Partner and community providers are signed by their developers.
If you&#39;d like to know more about provider signing, you can read about it here:
https://www.terraform.io/docs/cli/plugins/signing.html

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run &#34;terraform init&#34; in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &#34;terraform plan&#34; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.</code></pre></div></div>
</div>
<h2 id=2-create-execution-plan>2. Create execution plan</h2>
<p>The <code>terraform plan</code> command creates an execution plan. By default, creating a plan consists of:</p>
<ul>
<li>Reading the current state of any already-existing remote objects to make sure that the Terraform state is up-to-date.</li>
<li>Comparing the current configuration to the prior state and noting any differences.</li>
<li>Proposing a set of change actions that should, if applied, make the remote objects match the configuration.</li>
</ul>
<p>The plan command alone will not actually carry out the proposed changes, and so you can use this command to check whether the proposed changes match what you expected before you apply the changes</p>
<ul class="nav nav-tabs" id=tabs-4 role=tablist><li class=nav-item>
<a class="nav-link active tab-Execution-Plan" id=tabs-4-0-tab data-toggle=tab href=#tabs-4-0 role=tab onclick='handleClick("Execution-Plan")' aria-controls=tabs-4-0 aria-selected=true>
Execution Plan
</a>
</li><li class=nav-item>
<a class="nav-link tab-Execution-Plan-Output" id=tabs-4-1-tab data-toggle=tab href=#tabs-4-1 role=tab onclick='handleClick("Execution-Plan-Output")' aria-controls=tabs-4-1 aria-selected=false>
Execution Plan Output
</a>
</li></ul>
<div class=tab-content id=tabs-4-content><div class="tab-pane fade show active" id=tabs-4-0 role=tabpanel aria-labelled-by=tabs-4-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>terraform plan -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;access_token=</span><span style=color:#000>$ACCESS_TOKEN</span><span style=color:#4e9a06>&#34;</span> -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;realm=</span><span style=color:#000>$REALM</span><span style=color:#4e9a06>&#34;</span> -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;sfx_prefix=[</span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>]&#34;</span></code></pre></div></div>
<div class="tab-pane fade" id=tabs-4-1 role=tabpanel aria-labelled-by=tabs-4-1-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Plan: <span style=color:#0000cf;font-weight:700>92</span> to add, <span style=color:#0000cf;font-weight:700>0</span> to change, <span style=color:#0000cf;font-weight:700>0</span> to destroy.</code></pre></div></div>
</div>
<p>If the plan executes successfully, we can go ahead and apply:</p>
<hr>
<h2 id=3-apply-execution-plan>3. Apply execution plan</h2>
<p>The <code>terraform apply</code> command executes the actions proposed in the Terraform plan above.</p>
<p>The most straightforward way to use <code>terraform apply</code> is to run it without any arguments at all, in which case it will automatically create a new execution plan (as if you had run terraform plan) and then prompt you to provide the Access Token, Realm (the prefix defaults to <code>Splunk</code>) and approve the plan, before taking the indicated actions.</p>
<p>Due to this being a workshop it is required that the prefix is to be unique so you need to run the <code>terraform apply</code> below.</p>
<ul class="nav nav-tabs" id=tabs-5 role=tablist><li class=nav-item>
<a class="nav-link active tab-Apply-Plan" id=tabs-5-0-tab data-toggle=tab href=#tabs-5-0 role=tab onclick='handleClick("Apply-Plan")' aria-controls=tabs-5-0 aria-selected=true>
Apply Plan
</a>
</li><li class=nav-item>
<a class="nav-link tab-Apply-Plan-Output" id=tabs-5-1-tab data-toggle=tab href=#tabs-5-1 role=tab onclick='handleClick("Apply-Plan-Output")' aria-controls=tabs-5-1 aria-selected=false>
Apply Plan Output
</a>
</li></ul>
<div class=tab-content id=tabs-5-content><div class="tab-pane fade show active" id=tabs-5-0 role=tabpanel aria-labelled-by=tabs-5-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>terraform apply -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;access_token=</span><span style=color:#000>$ACCESS_TOKEN</span><span style=color:#4e9a06>&#34;</span> -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;realm=</span><span style=color:#000>$REALM</span><span style=color:#4e9a06>&#34;</span> -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;sfx_prefix=[</span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>]&#34;</span></code></pre></div></div>
<div class="tab-pane fade" id=tabs-5-1 role=tabpanel aria-labelled-by=tabs-5-1-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Apply complete! Resources: <span style=color:#0000cf;font-weight:700>92</span> added, <span style=color:#0000cf;font-weight:700>0</span> changed, <span style=color:#0000cf;font-weight:700>0</span> destroyed.</code></pre></div></div>
</div>
<p>Once the apply has completed, validate that the detectors were created, under the <strong>Alerts & Detectors</strong> and click on the <strong>Detectors</strong> tab. They will be prefixed by the hostname of your instance. To check the prefix value run:</p>
<ul class="nav nav-tabs" id=tabs-6 role=tablist><li class=nav-item>
<a class="nav-link active tab-Echo-Hostname" id=tabs-6-0-tab data-toggle=tab href=#tabs-6-0 role=tab onclick='handleClick("Echo-Hostname")' aria-controls=tabs-6-0 aria-selected=true>
Echo Hostname
</a>
</li></ul>
<div class=tab-content id=tabs-6-content><div class="tab-pane fade show active" id=tabs-6-0 role=tabpanel aria-labelled-by=tabs-6-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>echo</span> <span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span></code></pre></div></div>
</div>
<p>You will see a list of the new detectors and you can search for the prefix that was output from above.</p>
<p><img src=../../../images//detectors.png alt=Detectors></p>
<h2 id=3-destroy-all-your-hard-work>3. Destroy all your hard work</h2>
<p>The <code>terraform destroy</code> command is a convenient way to destroy all remote objects managed by your Terraform configuration.</p>
<p>While you will typically not want to destroy long-lived objects in a production environment, Terraform is sometimes used to manage ephemeral infrastructure for development purposes, in which case you can use <code>terraform destroy</code> to conveniently clean up all of those temporary objects once you are finished with your work.</p>
<p>Now go and destroy all the Detectors and Dashboards that were previously applied!</p>
<ul class="nav nav-tabs" id=tabs-7 role=tablist><li class=nav-item>
<a class="nav-link active tab-Destroy" id=tabs-7-0-tab data-toggle=tab href=#tabs-7-0 role=tab onclick='handleClick("Destroy")' aria-controls=tabs-7-0 aria-selected=true>
Destroy
</a>
</li><li class=nav-item>
<a class="nav-link tab-Destroy-Output" id=tabs-7-1-tab data-toggle=tab href=#tabs-7-1 role=tab onclick='handleClick("Destroy-Output")' aria-controls=tabs-7-1 aria-selected=false>
Destroy Output
</a>
</li></ul>
<div class=tab-content id=tabs-7-content><div class="tab-pane fade show active" id=tabs-7-0 role=tabpanel aria-labelled-by=tabs-7-0-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>terraform destroy -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;access_token=</span><span style=color:#000>$ACCESS_TOKEN</span><span style=color:#4e9a06>&#34;</span> -var<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;realm=</span><span style=color:#000>$REALM</span><span style=color:#4e9a06>&#34;</span></code></pre></div></div>
<div class="tab-pane fade" id=tabs-7-1 role=tabpanel aria-labelled-by=tabs-7-1-tab><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Destroy complete! Resources: <span style=color:#0000cf;font-weight:700>92</span> destroyed.</code></pre></div></div>
</div>
<p>Validate all the detectors have been removed by navigating to <em><strong>Alerts → Detectors</strong></em></p>
<p><img src=../../../images/destroy.png alt=Destroyed></p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>Terraform is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.</p>
<p>Configuration files describe to Terraform the components needed to run a single application or your entire datacenter. Terraform generates an execution plan describing what it will do to reach the desired state, and then executes it to build the described infrastructure. As the configuration changes, Terraform is able to determine what changed and create incremental execution plans which can be applied.</p>
<p>The infrastructure Terraform can manage includes low-level components such as compute instances, storage, and networking, as well as high-level components such as DNS entries, SaaS features, etc.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>A provider is responsible for understanding API interactions and exposing resources. Providers generally are an IaaS (e.g. Alibaba Cloud, AWS, GCP, Microsoft Azure, OpenStack), PaaS (e.g. Heroku), or SaaS services (e.g. Splunk, Terraform Cloud, DNSimple, Cloudflare).&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/signalfx/observability-workshop aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 Splunk Inc. All Rights Reserved</small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.10/js/tabpane-persist.js></script>
<script src=/observability-workshop/v4.10/js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
<script>const svgCopy='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',svgCheck='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>',addCopyButtons=a=>{document.querySelectorAll("pre > code").forEach(c=>{const b=document.createElement("button");b.className="clipboard-button",b.type="button",b.innerHTML=svgCopy,b.addEventListener("click",()=>{a.writeText(c.innerText).then(()=>{b.blur(),b.innerHTML=svgCheck,setTimeout(()=>b.innerHTML=svgCopy,2e3)},a=>b.innerHTML="Error")});const d=c.parentNode;d.parentNode.insertBefore(b,d)})};if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",a.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",a.crossOrigin="anonymous",a.onload=()=>addCopyButtons(clipboard),document.body.appendChild(a)}</script>
</body>
</html>