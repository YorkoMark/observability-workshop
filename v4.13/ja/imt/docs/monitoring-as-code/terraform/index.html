<!doctype html><html lang=ja class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.92.2">
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=/observability-workshop/v4.13/favicons/favicon.ico>
<link rel=apple-touch-icon href=/observability-workshop/v4.13/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/observability-workshop/v4.13/favicons/android-192x192.png sizes=192x192>
<title>Monitoring as Code | Splunk Observability Cloud Workshops</title>
<meta name=description content="
Terraform1 を使用して Observability Cloud のダッシュボードとディテクターを管理します。
Terraform のSplunk Provider2 を初期化します
Terraformを実行して、Splunk Terraform Provider を使用してコードからディ …">
<meta property="og:title" content="Monitoring as Code">
<meta property="og:description" content="Terraform1 を使用して Observability Cloud のダッシュボードとディテクターを管理します。 Terraform のSplunk Provider2 を初期化します Terraformを実行して、Splunk Terraform Provider を使用してコードからディテクターとダッシュボードを作成します。 Terraformでディテクターやダッシュボードを削除する方法を確認します。   1. 初期設定 Monitoring as Codeは、infrastructure as Codeと同じアプローチを採用しています。アプリケーション、サーバー、その他のインフラコンポーネントと同じようにモニタリングを管理できます。
Monitoring as Codeでは、可視化したり、何を監視するか定義したり、いつアラートを出すかなどを管理します。つまり、監視設定、プロセス、ルールをバージョン管理、共有、再利用することができます。
Splunk Terraform Providerの完全なドキュメントはこちら にあります。
AWS/EC2 インスタンスにログインして、signalfx-jumpstart ディレクトリに移動します
=== &ldquo;シェルコマンド&rdquo;
```text cd ~/signalfx-jumpstart ```  必要な環境変数は、Installation using Helm ですでに設定されているはずです。そうでない場合は、以下の Terraform のステップで使用するために、以下の環境変数を作成してください。
=== &ldquo;シェルコマンド&rdquo;
``` export ACCESS_TOKEN=<replace_with_default_access_token> export REALM=<replace_with_splunk_realm> ```  Terraform を初期化し、Splunk Terraform Provider を最新版にアップグレードします。
!!! note &ldquo;SignalFx Terraform Provider のアップグレード&rdquo; Splunk Terraform Provider の新バージョンがリリースされるたびに、以下のコマンドを実行する必要があります。リリース情報はGitHub {: target=_blank}で確認できます。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://signalfx.github.io/observability-workshop/v4.13/ja/imt/docs/monitoring-as-code/terraform/"><meta property="article:section" content="imt">
<meta property="article:modified_time" content="2022-03-11T12:45:21+00:00"><meta property="og:site_name" content="Splunk Observability Cloud Workshops">
<meta itemprop=name content="Monitoring as Code">
<meta itemprop=description content="Terraform1 を使用して Observability Cloud のダッシュボードとディテクターを管理します。 Terraform のSplunk Provider2 を初期化します Terraformを実行して、Splunk Terraform Provider を使用してコードからディテクターとダッシュボードを作成します。 Terraformでディテクターやダッシュボードを削除する方法を確認します。   1. 初期設定 Monitoring as Codeは、infrastructure as Codeと同じアプローチを採用しています。アプリケーション、サーバー、その他のインフラコンポーネントと同じようにモニタリングを管理できます。
Monitoring as Codeでは、可視化したり、何を監視するか定義したり、いつアラートを出すかなどを管理します。つまり、監視設定、プロセス、ルールをバージョン管理、共有、再利用することができます。
Splunk Terraform Providerの完全なドキュメントはこちら にあります。
AWS/EC2 インスタンスにログインして、signalfx-jumpstart ディレクトリに移動します
=== &ldquo;シェルコマンド&rdquo;
```text cd ~/signalfx-jumpstart ```  必要な環境変数は、Installation using Helm ですでに設定されているはずです。そうでない場合は、以下の Terraform のステップで使用するために、以下の環境変数を作成してください。
=== &ldquo;シェルコマンド&rdquo;
``` export ACCESS_TOKEN=<replace_with_default_access_token> export REALM=<replace_with_splunk_realm> ```  Terraform を初期化し、Splunk Terraform Provider を最新版にアップグレードします。
!!! note &ldquo;SignalFx Terraform Provider のアップグレード&rdquo; Splunk Terraform Provider の新バージョンがリリースされるたびに、以下のコマンドを実行する必要があります。リリース情報はGitHub {: target=_blank}で確認できます。">
<meta itemprop=dateModified content="2022-03-11T12:45:21+00:00">
<meta itemprop=wordCount content="413">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Monitoring as Code">
<meta name=twitter:description content="Terraform1 を使用して Observability Cloud のダッシュボードとディテクターを管理します。 Terraform のSplunk Provider2 を初期化します Terraformを実行して、Splunk Terraform Provider を使用してコードからディテクターとダッシュボードを作成します。 Terraformでディテクターやダッシュボードを削除する方法を確認します。   1. 初期設定 Monitoring as Codeは、infrastructure as Codeと同じアプローチを採用しています。アプリケーション、サーバー、その他のインフラコンポーネントと同じようにモニタリングを管理できます。
Monitoring as Codeでは、可視化したり、何を監視するか定義したり、いつアラートを出すかなどを管理します。つまり、監視設定、プロセス、ルールをバージョン管理、共有、再利用することができます。
Splunk Terraform Providerの完全なドキュメントはこちら にあります。
AWS/EC2 インスタンスにログインして、signalfx-jumpstart ディレクトリに移動します
=== &ldquo;シェルコマンド&rdquo;
```text cd ~/signalfx-jumpstart ```  必要な環境変数は、Installation using Helm ですでに設定されているはずです。そうでない場合は、以下の Terraform のステップで使用するために、以下の環境変数を作成してください。
=== &ldquo;シェルコマンド&rdquo;
``` export ACCESS_TOKEN=<replace_with_default_access_token> export REALM=<replace_with_splunk_realm> ```  Terraform を初期化し、Splunk Terraform Provider を最新版にアップグレードします。
!!! note &ldquo;SignalFx Terraform Provider のアップグレード&rdquo; Splunk Terraform Provider の新バージョンがリリースされるたびに、以下のコマンドを実行する必要があります。リリース情報はGitHub {: target=_blank}で確認できます。">
<link rel=preload href=/observability-workshop/v4.13/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css as=style>
<link href=/observability-workshop/v4.13/scss/main.min.deddc9b57e65de2e36e0a7912039ccf70079af844257489a558c52de37f7ad90.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar1>
<a class=navbar-brand href=/observability-workshop/v4.13/ja/>
<span class=navbar-logo><img class=navbar-logo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAIAAAD8RQT7AAACwklEQVRYw+2YW2jTYBTHu4l4F1ERVMQL+qKgMBUU9EEfRAURUUFfBEUEBRGfdC+CrVt3cdbNSZ1zXqar024yp9MJKzh3FScyO+q8MDW3pvc2TZqkudSvtD4J66fkWyL0kNeQH8mX8/+dY8JMZuNcpjzNX9JQK64ZiEZlk9zDEe/aOmPQ8FIKlJpKtH+mNzUYg+Z38a7vvu2NRqHJlDhABPY0G4UmU8lhOnioFSu0GIImU9KXUOhYOz75kiFoMiVjsfDpl/i0UrQ0oePPkp5ACq5kHxs978JnlaHsxQVm/24H3zUGyaRE+Jj5DTGvEm0yeNfVsfeGVVGGYQJtk6kaIBfZ0OYUufBKrKRHCSWgmAQ5fmOIWl6DNjXx6dbwqRfgh4L6eJLC3v/oXW1HnOGFlsDeR0L3TygmEC+tn+j19ciNgt5Qzznc4B3AUPGd33xb7yL3G3LJVaaiX4kKMExCD+bf2YTctvCZZZEzndJYBIZJfE8F9jtBE0HsfpMswQNOoR+HYWIbPkyQiQIr4pyelKyOQ5No8UyoF1PLahjboMqIhqABl3/HA6EX05kGyEboSBuQIZ2/FDGnInKuSyaZnKcYLU32lMTF3P05ITHVb8nFNiQ09MZbXPPI+H9QliMuMuV9xIIqBN2vwAy8HTKw0gJ0sZuYW6l9MuBTS8MnnkujQSgOPxctdhGzy7VPTWL+5eiF1+ABUJJKMpGzr4CHaG8U1KrauH0IHEAot/kRDZ/swKeUaG9bvi13Em2jKUWF4gDDzdGn/zbcmHJE4MEWcZCAFPWk2xc8/ATcpbGl4zOsYFCC1IOsIex7/KchaEMj0ywkh9CH+3c59J8104uLbY36T758x1d68229twIZ+y+6qffGRFa5Jrd3jR3Td5ukJhVgr9TKWp03benp9fo7cmm1/lvImLUXDN757XWe5v+g+QU6sNkgKUPrgwAAAABJRU5ErkJggg=="></span><span class=font-weight-bold>Splunk Observability Cloud Workshops</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
</ul>
</div>
</nav>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" id=navbar2>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/observability-workshop/v4.13/ja/imt/><span class=active>Splunk IMT</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.13/ja/apm/><span>Splunk APM</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/observability-workshop/v4.13/ja/synthetics/><span>Splunk Synthetics</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
More Workshops
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/pet-clinic/>Pet Clinic Java Workshop</a>
<a class=dropdown-item href=/bootcamp/>O11y Bootcamp</a>
<a class=dropdown-item href=/resources/>Resources</a>
</div>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
Releases
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/latest/>latest</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.12>v4.12</a>
<a class=dropdown-item href=https://signalfx.github.io/observability-workshop/v4.13>v4.13</a>
</div>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
日本語
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/observability-workshop/v4.13/imt/docs/monitoring-as-code/terraform/>English</a>
</div>
</li>
</ul>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; サイトを検索..." aria-label=サイトを検索... autocomplete=off data-offline-search-index-json-src=/observability-workshop/v4.13/offline-search-index.25f913854c91f92eebaabcc84e7abaac.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<div class="nav-item dropdown d-block d-lg-none">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
日本語
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/observability-workshop/v4.13/imt/docs/monitoring-as-code/terraform/>English</a>
</div>
</div>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv413jaimt-li>
<a href=/observability-workshop/v4.13/ja/imt/ title=はじめに class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-observability-workshopv413jaimt><span>Splunk IMT</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv413jaimtdocs-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocs><span>Setup and Exercises</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsinitial-setup-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/initial-setup/ title="How to connect to your workshop environment" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsinitial-setup><span>Access AWS/EC2 Instance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv413jaimtdocsgdi-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/gdi/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocsgdi><span>Get Data In</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsgdik3s-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/gdi/k3s/ title="Deploying the OpenTelemetry Collector in Kubernetes" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsgdik3s><span>Deploy the OTel Collector</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsgdinginx-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/gdi/nginx/ title="Deploying NGINX in K3s" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsgdinginx><span>Deploy and Monitor NGIX</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv413jaimtdocsdashboards-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/ title="Working with Dashboards" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocsdashboards><span>Dashboards</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardsintro-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/intro/ title="Working with Dashboards, Charts and Metrics" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardsintro><span>Introduction</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardsediting-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/editing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardsediting><span>Editing charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardssavingcharts-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/savingcharts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardssavingcharts><span>Saving charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardsfiltering-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/filtering/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardsfiltering><span>Using Filters & Formulas</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardssignalflow-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/signalflow/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardssignalflow><span>SignalFlow</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardsadding-charts-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/adding-charts/ title="Adding charts to dashboards" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardsadding-charts><span>Adding more charts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdashboardsdashboarding-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/dashboards/dashboarding/ title="Adding Notes and Dashboard Layout" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdashboardsdashboarding><span>Notes and layout</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv413jaimtdocsdetectors-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/detectors/ title="Working with Detectors" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocsdetectors><span>Detectors</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdetectorsmuting-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/detectors/muting/ title="Working with Muting Rules - Lab Summary" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdetectorsmuting><span>Creating a Muting Rule</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsdetectorscreating-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/detectors/creating/ title="Working with Detectors - Lab Summary" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsdetectorscreating><span>Creating a Detector</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-observability-workshopv413jaimtdocsmonitoring-as-code-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/monitoring-as-code/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocsmonitoring-as-code><span>Monitoring as Code</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-observability-workshopv413jaimtdocsmonitoring-as-codeterraform-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/monitoring-as-code/terraform/ title="Monitoring as Code" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsmonitoring-as-codeterraform><span class=td-sidebar-nav-active-item>Plan, Apply, Destroy</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-observability-workshopv413jaimtdocsservicebureau-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/servicebureau/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-observability-workshopv413jaimtdocsservicebureau><span>Service Bureau</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsservicebureaubilling-and-usage-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/servicebureau/billing-and-usage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsservicebureaubilling-and-usage><span>Billing and Usage</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsservicebureauteams-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/servicebureau/teams/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsservicebureauteams><span>Teams</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-observability-workshopv413jaimtdocsservicebureautokens-li>
<a href=/observability-workshop/v4.13/ja/imt/docs/servicebureau/tokens/ title="Controlling Usage" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-observability-workshopv413jaimtdocsservicebureautokens><span>Control Usage</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li><a href=#1-初期設定>1. 初期設定</a></li>
<li><a href=#2-プランの作成>2. プランの作成</a></li>
<li><a href=#3-プランの適用>3. プランの適用</a></li>
<li><a href=#3-苦労して作ったもの全てを壊す>3. 苦労して作ったもの全てを壊す</a></li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class=td-breadcrumbs>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.13/ja/imt/>Splunk IMT</a>
</li>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.13/ja/imt/docs/>Setup and Exercises</a>
</li>
<li class=breadcrumb-item>
<a href=https://signalfx.github.io/observability-workshop/v4.13/ja/imt/docs/monitoring-as-code/>Monitoring as Code</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://signalfx.github.io/observability-workshop/v4.13/ja/imt/docs/monitoring-as-code/terraform/>Plan, Apply, Destroy</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Monitoring as Code</h1>
<header class=article-meta>
<p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>&nbsp; 2 minute read &nbsp;</p>
</header>
<ul>
<li>Terraform<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> を使用して Observability Cloud のダッシュボードとディテクターを管理します。</li>
<li>Terraform のSplunk Provider<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> を初期化します</li>
<li>Terraformを実行して、Splunk Terraform Provider を使用してコードからディテクターとダッシュボードを作成します。</li>
<li>Terraformでディテクターやダッシュボードを削除する方法を確認します。</li>
</ul>
<hr>
<h2 id=1-初期設定>1. 初期設定</h2>
<p>Monitoring as Codeは、infrastructure as Codeと同じアプローチを採用しています。アプリケーション、サーバー、その他のインフラコンポーネントと同じようにモニタリングを管理できます。</p>
<p>Monitoring as Codeでは、可視化したり、何を監視するか定義したり、いつアラートを出すかなどを管理します。つまり、監視設定、プロセス、ルールをバージョン管理、共有、再利用することができます。</p>
<p>Splunk Terraform Providerの完全なドキュメントは<a href=https://registry.terraform.io/providers/splunk-terraform/signalfx/latest/docs target=_blank>こちら</a>
にあります。</p>
<p>AWS/EC2 インスタンスにログインして、<code>signalfx-jumpstart</code> ディレクトリに移動します</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
cd ~/signalfx-jumpstart
```
</code></pre>
<p>必要な環境変数は、<a href=../../otel/k3s/#2-installation-using-helm>Installation using Helm</a>
ですでに設定されているはずです。そうでない場合は、以下の Terraform のステップで使用するために、以下の環境変数を作成してください。</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```
export ACCESS_TOKEN=&lt;replace_with_default_access_token&gt;
export REALM=&lt;replace_with_splunk_realm&gt;
```
</code></pre>
<p>Terraform を初期化し、Splunk Terraform Provider を最新版にアップグレードします。</p>
<p>!!! note &ldquo;SignalFx Terraform Provider のアップグレード&rdquo;
Splunk Terraform Provider の新バージョンがリリースされるたびに、以下のコマンドを実行する必要があります。リリース情報は<a href=https://github.com/splunk-terraform/terraform-provider-signalfx/releases target=_blank>GitHub</a>
{: target=_blank}で確認できます。</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
terraform init -upgrade
```
</code></pre>
<p>=== &ldquo;出力&rdquo;</p>
<pre><code>```
Upgrading modules...
- aws in modules/aws
- azure in modules/azure
- docker in modules/docker
- gcp in modules/gcp
- host in modules/host
- kafka in modules/kafka
- kubernetes in modules/kubernetes
- parent_child_dashboard in modules/dashboards/parent
- pivotal in modules/pivotal
- usage_dashboard in modules/dashboards/usage

Initializing the backend...

Initializing provider plugins...
- Finding latest version of splunk-terraform/signalfx...
- Installing splunk-terraform/signalfx v6.7.3...
- Installed splunk-terraform/signalfx v6.7.3 (signed by a HashiCorp partner, key ID 8B5755E223754FC9)

Partner and community providers are signed by their developers.
If you'd like to know more about provider signing, you can read about it here:
https://www.terraform.io/docs/cli/plugins/signing.html

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run &quot;terraform init&quot; in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
```
</code></pre>
<h2 id=2-プランの作成>2. プランの作成</h2>
<p><code>terraform plan</code> コマンドは、実行計画を作成します。デフォルトでは、プランの作成は以下のように構成されています。</p>
<ul>
<li>既に存在するリモートオブジェクトの現在の状態を読み込み、Terraform の状態が最新であることを確認します</li>
<li>現在の設定を以前の状態と比較し、相違点を抽出します</li>
<li>適用された場合にリモートオブジェクトと設定とを一致させるための、一連の変更アクションを提案します</li>
</ul>
<p>plan コマンドだけでは、提案された変更を実際に実行はされなません。変更を適用する前に、以下のコマンドを実行して、提案された変更が期待したものと一致するかどうかを確認しましょう。</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
terraform plan -var=&quot;access_token=$ACCESS_TOKEN&quot; -var=&quot;realm=$REALM&quot; -var=&quot;sfx_prefix=[$(hostname)]&quot;
```
</code></pre>
<p>=== &ldquo;出力例&rdquo;</p>
<pre><code>```
Plan: 92 to add, 0 to change, 0 to destroy.
```
</code></pre>
<p>プランが正常に実行されれば、そのまま適用することができます。</p>
<hr>
<h2 id=3-プランの適用>3. プランの適用</h2>
<p><code>terraform apply</code> コマンドは、上記の Terraform プランで提案されたアクションを実行します。</p>
<p>この場合、新しい実行プランが自動的に作成され（<code>terraform plan</code>を実行したときと同様です）、指示されたアクションを実行する前にAccess Token、Realm（プレフィックスのデフォルトは<code>Splunk</code>）の提供とプランの承認を求められます。</p>
<p>このワークショップでは、プレフィックスがユニークである必要があります。以下の <code>terraform apply</code> を実行してください。</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
terraform apply -var=&quot;access_token=$ACCESS_TOKEN&quot; -var=&quot;realm=$REALM&quot; -var=&quot;sfx_prefix=[$(hostname)]&quot;
```
</code></pre>
<p>=== &ldquo;出力例&rdquo;</p>
<pre><code>```
Apply complete! Resources: 92 added, 0 changed, 0 destroyed.
```
</code></pre>
<p>適用が完了したら、 <strong>Alerts → Detectors</strong> でディテクターが作成されたことを確認してください。ディテクターのプレフィックスには、インスタンスのホスト名が入ります。プレフィックスの値を確認するには以下を実行してください。</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
echo $(hostname)
```
</code></pre>
<p>新しいディテクターのリストが表示され、上から出力されたプレフィックスを検索することができます。</p>
<p><img src=../../../images/detectors.png alt=Detectors></p>
<h2 id=3-苦労して作ったもの全てを壊す>3. 苦労して作ったもの全てを壊す</h2>
<p><code>terraform destroy</code> コマンドは、Terraform の設定で管理されているすべてのリモートオブジェクトを破壊する便利な方法です。</p>
<p>通常、本番環境では長期保存可能なオブジェクトを破棄することはありませんが、Terraformでは開発目的で一時的なインフラを管理するために使用されることがあり、その場合は作業が終わった後に <code>terraform destroy</code> を実行して、一時的なオブジェクトをすべてクリーンアップすることができます。</p>
<p>それでは、ここまでで適用したダッシュボードとディテクターを全て破壊しましょう！</p>
<p>=== &ldquo;シェルコマンド&rdquo;</p>
<pre><code>```text
terraform destroy -var=&quot;access_token=$ACCESS_TOKEN&quot; -var=&quot;realm=$REALM&quot;
```
</code></pre>
<p>=== &ldquo;出力例&rdquo;</p>
<pre><code>```
Destroy complete! Resources: 92 destroyed.
```
</code></pre>
<p><em><strong>Alerts → Detectors</strong></em> に移動して、すべてのディテクターが削除されたことを確認してください。</p>
<p><img src=../../../images/destroy.png alt=Destroyed></p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>Terraform は、インフラを安全かつ効率的に構築、変更、バージョン管理するためのツールです。Terraform は、既存の一般的なサービスプロバイダーだけでなく、様々なカスタムソリューションも管理できます。</p>
<p>Terraform の設定ファイルには、単一のアプリケーションまたはデータセンター全体を実行するために必要なコンポーネントをに記述します。Terraform はそれを受けて、望ましい状態に到達するために何をするかを記述した実行プランを生成し、記述されたインフラを構築するために実行します。設定が変更されても、Terraform は何が変更されたかを判断し、差分の実行プランを作成して適用することができます。</p>
<p>Terraform が管理できるインフラには、計算機インスタンス、ストレージ、ネットワークなどのローレベルのコンポーネントや、DNSエントリ、SaaS機能などのハイレベルのコンポーネントが含まれます。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>プロバイダーは、APIのインタラクションを理解し、リソースを公開する責務があります。一般的にプロバイダーは、IaaS（Alibaba Cloud、AWS、GCP、Microsoft Azure、OpenStackなど）、PaaS（Herokuなど）、またはSaaSサービス（Splunk、Terraform Cloud、DNSimple、Cloudflareなど）があります。&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter>
<a class=text-white target=_blank rel=noopener href=https://twitter.com/splunk aria-label=Twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/signalfx/observability-workshop aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 Splunk Inc. All Rights Reserved</small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/observability-workshop/v4.13/js/tabpane-persist.js></script>
<script src=/observability-workshop/v4.13/js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
<script>const svgCopy='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',svgCheck='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>',addCopyButtons=a=>{document.querySelectorAll("pre > code").forEach(c=>{const b=document.createElement("button");b.className="clipboard-button",b.type="button",b.innerHTML=svgCopy,b.addEventListener("click",()=>{a.writeText(c.innerText).then(()=>{b.blur(),b.innerHTML=svgCheck,setTimeout(()=>b.innerHTML=svgCopy,2e3)},a=>b.innerHTML="Error")});const d=c.parentNode;d.parentNode.insertBefore(b,d)})};if(navigator&&navigator.clipboard)addCopyButtons(navigator.clipboard);else{const a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard-polyfill/2.7.0/clipboard-polyfill.promise.js",a.integrity="sha256-waClS2re9NUbXRsryKoof+F9qc1gjjIhc2eT7ZbIv94=",a.crossOrigin="anonymous",a.onload=()=>addCopyButtons(clipboard),document.body.appendChild(a)}</script>
</body>
</html>